{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { _, ChartType } from \"@ag-grid-community/core\";\nimport { AgChart } from \"ag-charts-community\";\nimport { CartesianChartProxy } from \"./cartesianChartProxy\";\n\nvar BarChartProxy = function (_super) {\n  __extends(BarChartProxy, _super);\n\n  function BarChartProxy(params) {\n    var _this = _super.call(this, params) || this;\n\n    _this.initChartOptions();\n\n    _this.recreateChart();\n\n    return _this;\n  }\n\n  BarChartProxy.prototype.createChart = function () {\n    var grouping = this.chartProxyParams.grouping;\n    var isColumn = this.isColumnChart();\n    var options = this.iChartOptions;\n    var agChartOptions = options;\n\n    if (grouping) {\n      agChartOptions.type = 'groupedCategory';\n    }\n\n    agChartOptions.autoSize = true;\n    agChartOptions.axes = [__assign(__assign({}, isColumn ? options.xAxis : options.yAxis), {\n      position: isColumn ? 'bottom' : 'left',\n      type: grouping ? 'groupedCategory' : 'category'\n    }), __assign(__assign({}, isColumn ? options.yAxis : options.xAxis), {\n      position: isColumn ? 'left' : 'bottom',\n      type: 'number'\n    })];\n    var chartType = this.chartType;\n    var isGrouped = !this.crossFiltering && (chartType === ChartType.GroupedColumn || chartType === ChartType.GroupedBar);\n    var isNormalized = !this.crossFiltering && (chartType === ChartType.NormalizedColumn || chartType === ChartType.NormalizedBar);\n    var seriesDefaults = this.iChartOptions.seriesDefaults;\n    agChartOptions.series = [__assign(__assign({\n      type: isColumn ? 'column' : 'bar',\n      grouped: isGrouped,\n      normalizedTo: isNormalized ? 100 : undefined\n    }, seriesDefaults), {\n      // mapping for ag chart options\n      fills: seriesDefaults.fill.colors,\n      fillOpacity: seriesDefaults.fill.opacity,\n      strokes: seriesDefaults.stroke.colors,\n      strokeOpacity: seriesDefaults.stroke.opacity,\n      strokeWidth: seriesDefaults.stroke.width\n    })];\n    agChartOptions.container = this.chartProxyParams.parentElement;\n    return AgChart.create(agChartOptions);\n  };\n\n  BarChartProxy.prototype.update = function (params) {\n    var _this = this;\n\n    this.chartProxyParams.grouping = params.grouping;\n    this.updateAxes('category', !this.isColumnChart());\n    var chart = this.chart;\n    var barSeries = chart.series[0];\n    var palette = this.getPalette();\n    var fields = params.fields;\n\n    if (this.crossFiltering) {\n      // add additional filtered out field\n      fields.forEach(function (field) {\n        var crossFilteringField = __assign({}, field);\n\n        crossFilteringField.colId = field.colId + '-filtered-out';\n        fields.push(crossFilteringField);\n      }); // introduce cross filtering transparent fills\n\n      var fills_1 = [];\n      palette.fills.forEach(function (fill) {\n        fills_1.push(fill);\n        fills_1.push(_this.hexToRGBA(fill, '0.3'));\n      });\n      barSeries.fills = fills_1; // introduce cross filtering transparent strokes\n\n      var strokes = [];\n      palette.strokes.forEach(function (stroke) {\n        fills_1.push(stroke);\n        fills_1.push(_this.hexToRGBA(stroke, '0.3'));\n      });\n      barSeries.strokes = strokes; // disable series highlighting by default\n\n      barSeries.highlightStyle.fill = undefined; // hide 'filtered out' legend items\n\n      var colIds = params.fields.map(function (f) {\n        return f.colId;\n      });\n      barSeries.hideInLegend = colIds.filter(function (colId) {\n        return colId.indexOf('-filtered-out') !== -1;\n      }); // sync toggling of legend item with hidden 'filtered out' item\n\n      chart.legend.addEventListener('click', function (event) {\n        barSeries.toggleSeriesItem(event.itemId + '-filtered-out', event.enabled);\n      });\n      chart.tooltip.delay = 500; // add node click cross filtering callback to series\n\n      barSeries.addEventListener('nodeClick', this.crossFilterCallback);\n    } else {\n      barSeries.fills = palette.fills;\n      barSeries.strokes = palette.strokes;\n    }\n\n    barSeries.data = this.transformData(params.data, params.category.id);\n    barSeries.xKey = params.category.id;\n    barSeries.xName = params.category.name;\n    barSeries.yKeys = params.fields.map(function (f) {\n      return f.colId;\n    });\n    barSeries.yNames = params.fields.map(function (f) {\n      return f.displayName;\n    });\n    this.updateLabelRotation(params.category.id, !this.isColumnChart());\n  };\n\n  BarChartProxy.prototype.extractIChartOptionsFromTheme = function (theme) {\n    var iChartOptions = _super.prototype.extractIChartOptionsFromTheme.call(this, theme);\n\n    var integratedChartType = this.chartType;\n    var standaloneChartType = this.getStandaloneChartType();\n    var seriesType = integratedChartType === ChartType.GroupedBar || integratedChartType === ChartType.StackedBar || integratedChartType === ChartType.NormalizedBar ? 'bar' : 'column';\n    var themeSeriesDefaults = theme.getConfig(standaloneChartType + '.series.' + seriesType);\n    iChartOptions.seriesDefaults = {\n      shadow: themeSeriesDefaults.shadow,\n      label: themeSeriesDefaults.label,\n      tooltip: {\n        enabled: themeSeriesDefaults.tooltip && themeSeriesDefaults.tooltip.enabled,\n        renderer: themeSeriesDefaults.tooltip && themeSeriesDefaults.tooltip.renderer\n      },\n      fill: {\n        colors: themeSeriesDefaults.fills || theme.palette.fills,\n        opacity: themeSeriesDefaults.fillOpacity\n      },\n      stroke: {\n        colors: themeSeriesDefaults.strokes || theme.palette.strokes,\n        opacity: themeSeriesDefaults.strokeOpacity,\n        width: themeSeriesDefaults.strokeWidth\n      },\n      lineDash: themeSeriesDefaults.lineDash ? themeSeriesDefaults.lineDash : [0],\n      lineDashOffset: themeSeriesDefaults.lineDashOffset,\n      highlightStyle: themeSeriesDefaults.highlightStyle,\n      listeners: themeSeriesDefaults.listeners\n    };\n    return iChartOptions;\n  };\n\n  BarChartProxy.prototype.isColumnChart = function () {\n    return _.includes([ChartType.Column, ChartType.GroupedColumn, ChartType.StackedColumn, ChartType.NormalizedColumn], this.chartType);\n  }; // TODO: should be removed along with processChartOptions()\n\n\n  BarChartProxy.prototype.getDefaultOptions = function () {\n    var fontOptions = this.getDefaultFontOptions();\n    var options = this.getDefaultCartesianChartOptions();\n    options.seriesDefaults = __assign(__assign({}, options.seriesDefaults), {\n      tooltip: {\n        enabled: true\n      },\n      label: __assign(__assign({}, fontOptions), {\n        enabled: false\n      }),\n      shadow: this.getDefaultDropShadowOptions()\n    });\n    return options;\n  };\n\n  return BarChartProxy;\n}(CartesianChartProxy);\n\nexport { BarChartProxy };","map":{"version":3,"sources":["C:/dev/streamlit-aggrid/st_aggrid/frontend/node_modules/@ag-grid-enterprise/charts/dist/es6/charts/chartComp/chartProxies/cartesian/barChartProxy.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","_","ChartType","AgChart","CartesianChartProxy","BarChartProxy","_super","params","_this","initChartOptions","recreateChart","createChart","grouping","chartProxyParams","isColumn","isColumnChart","options","iChartOptions","agChartOptions","type","autoSize","axes","xAxis","yAxis","position","chartType","isGrouped","crossFiltering","GroupedColumn","GroupedBar","isNormalized","NormalizedColumn","NormalizedBar","seriesDefaults","series","grouped","normalizedTo","undefined","fills","fill","colors","fillOpacity","opacity","strokes","stroke","strokeOpacity","strokeWidth","width","container","parentElement","update","updateAxes","chart","barSeries","palette","getPalette","fields","forEach","field","crossFilteringField","colId","push","fills_1","hexToRGBA","highlightStyle","colIds","map","f","hideInLegend","filter","indexOf","legend","addEventListener","event","toggleSeriesItem","itemId","enabled","tooltip","delay","crossFilterCallback","data","transformData","category","id","xKey","xName","name","yKeys","yNames","displayName","updateLabelRotation","extractIChartOptionsFromTheme","theme","integratedChartType","standaloneChartType","getStandaloneChartType","seriesType","StackedBar","themeSeriesDefaults","getConfig","shadow","label","renderer","lineDash","lineDashOffset","listeners","includes","Column","StackedColumn","getDefaultOptions","fontOptions","getDefaultFontOptions","getDefaultCartesianChartOptions","getDefaultDropShadowOptions"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { _, ChartType } from \"@ag-grid-community/core\";\nimport { AgChart } from \"ag-charts-community\";\nimport { CartesianChartProxy } from \"./cartesianChartProxy\";\nvar BarChartProxy = /** @class */ (function (_super) {\n    __extends(BarChartProxy, _super);\n    function BarChartProxy(params) {\n        var _this = _super.call(this, params) || this;\n        _this.initChartOptions();\n        _this.recreateChart();\n        return _this;\n    }\n    BarChartProxy.prototype.createChart = function () {\n        var grouping = this.chartProxyParams.grouping;\n        var isColumn = this.isColumnChart();\n        var options = this.iChartOptions;\n        var agChartOptions = options;\n        if (grouping) {\n            agChartOptions.type = 'groupedCategory';\n        }\n        agChartOptions.autoSize = true;\n        agChartOptions.axes = [\n            __assign(__assign({}, (isColumn ? options.xAxis : options.yAxis)), { position: isColumn ? 'bottom' : 'left', type: grouping ? 'groupedCategory' : 'category' }),\n            __assign(__assign({}, (isColumn ? options.yAxis : options.xAxis)), { position: isColumn ? 'left' : 'bottom', type: 'number' })\n        ];\n        var chartType = this.chartType;\n        var isGrouped = !this.crossFiltering && (chartType === ChartType.GroupedColumn || chartType === ChartType.GroupedBar);\n        var isNormalized = !this.crossFiltering && (chartType === ChartType.NormalizedColumn || chartType === ChartType.NormalizedBar);\n        var seriesDefaults = this.iChartOptions.seriesDefaults;\n        agChartOptions.series = [__assign(__assign({ type: isColumn ? 'column' : 'bar', grouped: isGrouped, normalizedTo: isNormalized ? 100 : undefined }, seriesDefaults), { \n                // mapping for ag chart options\n                fills: seriesDefaults.fill.colors, fillOpacity: seriesDefaults.fill.opacity, strokes: seriesDefaults.stroke.colors, strokeOpacity: seriesDefaults.stroke.opacity, strokeWidth: seriesDefaults.stroke.width })];\n        agChartOptions.container = this.chartProxyParams.parentElement;\n        return AgChart.create(agChartOptions);\n    };\n    BarChartProxy.prototype.update = function (params) {\n        var _this = this;\n        this.chartProxyParams.grouping = params.grouping;\n        this.updateAxes('category', !this.isColumnChart());\n        var chart = this.chart;\n        var barSeries = chart.series[0];\n        var palette = this.getPalette();\n        var fields = params.fields;\n        if (this.crossFiltering) {\n            // add additional filtered out field\n            fields.forEach(function (field) {\n                var crossFilteringField = __assign({}, field);\n                crossFilteringField.colId = field.colId + '-filtered-out';\n                fields.push(crossFilteringField);\n            });\n            // introduce cross filtering transparent fills\n            var fills_1 = [];\n            palette.fills.forEach(function (fill) {\n                fills_1.push(fill);\n                fills_1.push(_this.hexToRGBA(fill, '0.3'));\n            });\n            barSeries.fills = fills_1;\n            // introduce cross filtering transparent strokes\n            var strokes = [];\n            palette.strokes.forEach(function (stroke) {\n                fills_1.push(stroke);\n                fills_1.push(_this.hexToRGBA(stroke, '0.3'));\n            });\n            barSeries.strokes = strokes;\n            // disable series highlighting by default\n            barSeries.highlightStyle.fill = undefined;\n            // hide 'filtered out' legend items\n            var colIds = params.fields.map(function (f) { return f.colId; });\n            barSeries.hideInLegend = colIds.filter(function (colId) { return colId.indexOf('-filtered-out') !== -1; });\n            // sync toggling of legend item with hidden 'filtered out' item\n            chart.legend.addEventListener('click', function (event) {\n                barSeries.toggleSeriesItem(event.itemId + '-filtered-out', event.enabled);\n            });\n            chart.tooltip.delay = 500;\n            // add node click cross filtering callback to series\n            barSeries.addEventListener('nodeClick', this.crossFilterCallback);\n        }\n        else {\n            barSeries.fills = palette.fills;\n            barSeries.strokes = palette.strokes;\n        }\n        barSeries.data = this.transformData(params.data, params.category.id);\n        barSeries.xKey = params.category.id;\n        barSeries.xName = params.category.name;\n        barSeries.yKeys = params.fields.map(function (f) { return f.colId; });\n        barSeries.yNames = params.fields.map(function (f) { return f.displayName; });\n        this.updateLabelRotation(params.category.id, !this.isColumnChart());\n    };\n    BarChartProxy.prototype.extractIChartOptionsFromTheme = function (theme) {\n        var iChartOptions = _super.prototype.extractIChartOptionsFromTheme.call(this, theme);\n        var integratedChartType = this.chartType;\n        var standaloneChartType = this.getStandaloneChartType();\n        var seriesType = integratedChartType === ChartType.GroupedBar\n            || integratedChartType === ChartType.StackedBar\n            || integratedChartType === ChartType.NormalizedBar ? 'bar' : 'column';\n        var themeSeriesDefaults = theme.getConfig(standaloneChartType + '.series.' + seriesType);\n        iChartOptions.seriesDefaults = {\n            shadow: themeSeriesDefaults.shadow,\n            label: themeSeriesDefaults.label,\n            tooltip: {\n                enabled: themeSeriesDefaults.tooltip && themeSeriesDefaults.tooltip.enabled,\n                renderer: themeSeriesDefaults.tooltip && themeSeriesDefaults.tooltip.renderer\n            },\n            fill: {\n                colors: themeSeriesDefaults.fills || theme.palette.fills,\n                opacity: themeSeriesDefaults.fillOpacity\n            },\n            stroke: {\n                colors: themeSeriesDefaults.strokes || theme.palette.strokes,\n                opacity: themeSeriesDefaults.strokeOpacity,\n                width: themeSeriesDefaults.strokeWidth\n            },\n            lineDash: themeSeriesDefaults.lineDash ? themeSeriesDefaults.lineDash : [0],\n            lineDashOffset: themeSeriesDefaults.lineDashOffset,\n            highlightStyle: themeSeriesDefaults.highlightStyle,\n            listeners: themeSeriesDefaults.listeners\n        };\n        return iChartOptions;\n    };\n    BarChartProxy.prototype.isColumnChart = function () {\n        return _.includes([ChartType.Column, ChartType.GroupedColumn, ChartType.StackedColumn, ChartType.NormalizedColumn], this.chartType);\n    };\n    // TODO: should be removed along with processChartOptions()\n    BarChartProxy.prototype.getDefaultOptions = function () {\n        var fontOptions = this.getDefaultFontOptions();\n        var options = this.getDefaultCartesianChartOptions();\n        options.seriesDefaults = __assign(__assign({}, options.seriesDefaults), { tooltip: {\n                enabled: true,\n            }, label: __assign(__assign({}, fontOptions), { enabled: false }), shadow: this.getDefaultDropShadowOptions() });\n        return options;\n    };\n    return BarChartProxy;\n}(CartesianChartProxy));\nexport { BarChartProxy };\n"]},"metadata":{},"sourceType":"module"}