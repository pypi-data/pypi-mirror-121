{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.0.0\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Bean, PreDestroy, Autowired, PostConstruct } from \"../context/context\";\nimport { Events } from \"../events\";\nimport { BeanStub } from \"../context/beanStub\";\nimport { find, exists } from \"../utils/generic\";\nimport { removeFromArray } from \"../utils/array\";\nimport { addOrRemoveCssClass } from \"../utils/dom\";\nimport { areEventsNear } from \"../utils/mouse\";\n/** Adds drag listening onto an element. In AG Grid this is used twice, first is resizing columns,\n * second is moving the columns and column groups around (ie the 'drag' part of Drag and Drop. */\n\nvar DragService = function (_super) {\n  __extends(DragService, _super);\n\n  function DragService() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.dragEndFunctions = [];\n    _this.dragSources = [];\n    return _this;\n  }\n\n  DragService.prototype.init = function () {\n    this.logger = this.loggerFactory.create('DragService');\n  };\n\n  DragService.prototype.removeAllListeners = function () {\n    this.dragSources.forEach(this.removeListener.bind(this));\n    this.dragSources.length = 0;\n  };\n\n  DragService.prototype.removeListener = function (dragSourceAndListener) {\n    var element = dragSourceAndListener.dragSource.eElement;\n    var mouseDownListener = dragSourceAndListener.mouseDownListener;\n    element.removeEventListener('mousedown', mouseDownListener); // remove touch listener only if it exists\n\n    if (dragSourceAndListener.touchEnabled) {\n      var touchStartListener = dragSourceAndListener.touchStartListener;\n      element.removeEventListener('touchstart', touchStartListener, {\n        passive: true\n      });\n    }\n  };\n\n  DragService.prototype.removeDragSource = function (params) {\n    var dragSourceAndListener = find(this.dragSources, function (item) {\n      return item.dragSource === params;\n    });\n\n    if (!dragSourceAndListener) {\n      return;\n    }\n\n    this.removeListener(dragSourceAndListener);\n    removeFromArray(this.dragSources, dragSourceAndListener);\n  };\n\n  DragService.prototype.setNoSelectToBody = function (noSelect) {\n    var eDocument = this.gridOptionsWrapper.getDocument();\n    var eBody = eDocument.querySelector('body');\n\n    if (exists(eBody)) {\n      // when we drag the mouse in AG Grid, this class gets added / removed from the body, so that\n      // the mouse isn't selecting text when dragging.\n      addOrRemoveCssClass(eBody, 'ag-unselectable', noSelect);\n    }\n  };\n\n  DragService.prototype.isDragging = function () {\n    return this.dragging;\n  };\n\n  DragService.prototype.addDragSource = function (params, includeTouch) {\n    if (includeTouch === void 0) {\n      includeTouch = false;\n    }\n\n    var mouseListener = this.onMouseDown.bind(this, params);\n    params.eElement.addEventListener('mousedown', mouseListener);\n    var touchListener = null;\n    var suppressTouch = this.gridOptionsWrapper.isSuppressTouch();\n\n    if (includeTouch && !suppressTouch) {\n      touchListener = this.onTouchStart.bind(this, params);\n      params.eElement.addEventListener('touchstart', touchListener, {\n        passive: true\n      });\n    }\n\n    this.dragSources.push({\n      dragSource: params,\n      mouseDownListener: mouseListener,\n      touchStartListener: touchListener,\n      touchEnabled: includeTouch\n    });\n  }; // gets called whenever mouse down on any drag source\n\n\n  DragService.prototype.onTouchStart = function (params, touchEvent) {\n    var _this = this;\n\n    this.currentDragParams = params;\n    this.dragging = false;\n    var touch = touchEvent.touches[0];\n    this.touchLastTime = touch;\n    this.touchStart = touch;\n\n    var touchMoveEvent = function touchMoveEvent(e) {\n      return _this.onTouchMove(e, params.eElement);\n    };\n\n    var touchEndEvent = function touchEndEvent(e) {\n      return _this.onTouchUp(e, params.eElement);\n    };\n\n    var documentTouchMove = function documentTouchMove(e) {\n      if (e.cancelable) {\n        e.preventDefault();\n      }\n    };\n\n    var target = params.eElement;\n    var events = [// Prevents the page document from moving while we are dragging items around.\n    // preventDefault needs to be called in the touchmove listener and never inside the\n    // touchstart, because using touchstart causes the click event to be cancelled on touch devices.\n    {\n      target: document,\n      type: 'touchmove',\n      listener: documentTouchMove,\n      options: {\n        passive: false\n      }\n    }, {\n      target: target,\n      type: 'touchmove',\n      listener: touchMoveEvent,\n      options: {\n        passive: true\n      }\n    }, {\n      target: target,\n      type: 'touchend',\n      listener: touchEndEvent,\n      options: {\n        passive: true\n      }\n    }, {\n      target: target,\n      type: 'touchcancel',\n      listener: touchEndEvent,\n      options: {\n        passive: true\n      }\n    }]; // temporally add these listeners, for the duration of the drag\n\n    this.addTemporaryEvents(events); // see if we want to start dragging straight away\n\n    if (params.dragStartPixels === 0) {\n      this.onCommonMove(touch, this.touchStart, params.eElement);\n    }\n  }; // gets called whenever mouse down on any drag source\n\n\n  DragService.prototype.onMouseDown = function (params, mouseEvent) {\n    var _this = this;\n\n    var e = mouseEvent;\n\n    if (params.skipMouseEvent && params.skipMouseEvent(mouseEvent)) {\n      return;\n    } // if there are two elements with parent / child relationship, and both are draggable,\n    // when we drag the child, we should NOT drag the parent. an example of this is row moving\n    // and range selection - row moving should get preference when use drags the rowDrag component.\n\n\n    if (e._alreadyProcessedByDragService) {\n      return;\n    }\n\n    e._alreadyProcessedByDragService = true; // only interested in left button clicks\n\n    if (mouseEvent.button !== 0) {\n      return;\n    }\n\n    this.currentDragParams = params;\n    this.dragging = false;\n    this.mouseStartEvent = mouseEvent;\n    var eDocument = this.gridOptionsWrapper.getDocument();\n    this.setNoSelectToBody(true);\n\n    var mouseMoveEvent = function mouseMoveEvent(event) {\n      return _this.onMouseMove(event, params.eElement);\n    };\n\n    var mouseUpEvent = function mouseUpEvent(event) {\n      return _this.onMouseUp(event, params.eElement);\n    };\n\n    var contextEvent = function contextEvent(event) {\n      return event.preventDefault();\n    };\n\n    var target = eDocument;\n    var events = [{\n      target: target,\n      type: 'mousemove',\n      listener: mouseMoveEvent\n    }, {\n      target: target,\n      type: 'mouseup',\n      listener: mouseUpEvent\n    }, {\n      target: target,\n      type: 'contextmenu',\n      listener: contextEvent\n    }]; // temporally add these listeners, for the duration of the drag\n\n    this.addTemporaryEvents(events); //see if we want to start dragging straight away\n\n    if (params.dragStartPixels === 0) {\n      this.onMouseMove(mouseEvent, params.eElement);\n    }\n  };\n\n  DragService.prototype.addTemporaryEvents = function (events) {\n    events.forEach(function (currentEvent) {\n      var target = currentEvent.target,\n          type = currentEvent.type,\n          listener = currentEvent.listener,\n          options = currentEvent.options;\n      target.addEventListener(type, listener, options);\n    });\n    this.dragEndFunctions.push(function () {\n      events.forEach(function (currentEvent) {\n        var target = currentEvent.target,\n            type = currentEvent.type,\n            listener = currentEvent.listener,\n            options = currentEvent.options;\n        target.removeEventListener(type, listener, options);\n      });\n    });\n  }; // returns true if the event is close to the original event by X pixels either vertically or horizontally.\n  // we only start dragging after X pixels so this allows us to know if we should start dragging yet.\n\n\n  DragService.prototype.isEventNearStartEvent = function (currentEvent, startEvent) {\n    // by default, we wait 4 pixels before starting the drag\n    var dragStartPixels = this.currentDragParams.dragStartPixels;\n    var requiredPixelDiff = exists(dragStartPixels) ? dragStartPixels : 4;\n    return areEventsNear(currentEvent, startEvent, requiredPixelDiff);\n  };\n\n  DragService.prototype.getFirstActiveTouch = function (touchList) {\n    for (var i = 0; i < touchList.length; i++) {\n      if (touchList[i].identifier === this.touchStart.identifier) {\n        return touchList[i];\n      }\n    }\n\n    return null;\n  };\n\n  DragService.prototype.onCommonMove = function (currentEvent, startEvent, el) {\n    if (!this.dragging) {\n      // if mouse hasn't travelled from the start position enough, do nothing\n      if (!this.dragging && this.isEventNearStartEvent(currentEvent, startEvent)) {\n        return;\n      }\n\n      this.dragging = true;\n      var event_1 = {\n        type: Events.EVENT_DRAG_STARTED,\n        api: this.gridApi,\n        columnApi: this.columnApi,\n        target: el\n      };\n      this.eventService.dispatchEvent(event_1);\n      this.currentDragParams.onDragStart(startEvent); // we need ONE drag action at the startEvent, so that we are guaranteed the drop target\n      // at the start gets notified. this is because the drag can start outside of the element\n      // that started it, as the mouse is allowed drag away from the mouse down before it's\n      // considered a drag (the isEventNearStartEvent() above). if we didn't do this, then\n      // it would be possible to click a column by the edge, then drag outside of the drop zone\n      // in less than 4 pixels and the drag officially starts outside of the header but the header\n      // wouldn't be notified of the dragging.\n\n      this.currentDragParams.onDragging(startEvent);\n    }\n\n    this.currentDragParams.onDragging(currentEvent);\n  };\n\n  DragService.prototype.onTouchMove = function (touchEvent, el) {\n    var touch = this.getFirstActiveTouch(touchEvent.touches);\n\n    if (!touch) {\n      return;\n    } // this.___statusPanel.setInfoText(Math.random() + ' onTouchMove preventDefault stopPropagation');\n\n\n    this.onCommonMove(touch, this.touchStart, el);\n  }; // only gets called after a mouse down - as this is only added after mouseDown\n  // and is removed when mouseUp happens\n\n\n  DragService.prototype.onMouseMove = function (mouseEvent, el) {\n    this.onCommonMove(mouseEvent, this.mouseStartEvent, el);\n  };\n\n  DragService.prototype.onTouchUp = function (touchEvent, el) {\n    var touch = this.getFirstActiveTouch(touchEvent.changedTouches); // i haven't worked this out yet, but there is no matching touch\n    // when we get the touch up event. to get around this, we swap in\n    // the last touch. this is a hack to 'get it working' while we\n    // figure out what's going on, why we are not getting a touch in\n    // current event.\n\n    if (!touch) {\n      touch = this.touchLastTime;\n    } // if mouse was left up before we started to move, then this is a tap.\n    // we check this before onUpCommon as onUpCommon resets the dragging\n    // let tap = !this.dragging;\n    // let tapTarget = this.currentDragParams.eElement;\n\n\n    this.onUpCommon(touch, el); // if tap, tell user\n    // console.log(`${Math.random()} tap = ${tap}`);\n    // if (tap) {\n    //     tapTarget.click();\n    // }\n  };\n\n  DragService.prototype.onMouseUp = function (mouseEvent, el) {\n    this.onUpCommon(mouseEvent, el);\n  };\n\n  DragService.prototype.onUpCommon = function (eventOrTouch, el) {\n    if (this.dragging) {\n      this.dragging = false;\n      this.currentDragParams.onDragStop(eventOrTouch);\n      var event_2 = {\n        type: Events.EVENT_DRAG_STOPPED,\n        api: this.gridApi,\n        columnApi: this.columnApi,\n        target: el\n      };\n      this.eventService.dispatchEvent(event_2);\n    }\n\n    this.setNoSelectToBody(false);\n    this.mouseStartEvent = null;\n    this.touchStart = null;\n    this.touchLastTime = null;\n    this.currentDragParams = null;\n    this.dragEndFunctions.forEach(function (func) {\n      return func();\n    });\n    this.dragEndFunctions.length = 0;\n  };\n\n  __decorate([Autowired('loggerFactory')], DragService.prototype, \"loggerFactory\", void 0);\n\n  __decorate([Autowired('columnApi')], DragService.prototype, \"columnApi\", void 0);\n\n  __decorate([Autowired('gridApi')], DragService.prototype, \"gridApi\", void 0);\n\n  __decorate([PostConstruct], DragService.prototype, \"init\", null);\n\n  __decorate([PreDestroy], DragService.prototype, \"removeAllListeners\", null);\n\n  DragService = __decorate([Bean('dragService')], DragService);\n  return DragService;\n}(BeanStub);\n\nexport { DragService };","map":{"version":3,"sources":["C:/dev/streamlit-aggrid/st_aggrid/frontend/node_modules/@ag-grid-community/core/dist/es6/dragAndDrop/dragService.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Bean","PreDestroy","Autowired","PostConstruct","Events","BeanStub","find","exists","removeFromArray","addOrRemoveCssClass","areEventsNear","DragService","_super","_this","apply","dragEndFunctions","dragSources","init","logger","loggerFactory","removeAllListeners","forEach","removeListener","bind","dragSourceAndListener","element","dragSource","eElement","mouseDownListener","removeEventListener","touchEnabled","touchStartListener","passive","removeDragSource","params","item","setNoSelectToBody","noSelect","eDocument","gridOptionsWrapper","getDocument","eBody","querySelector","isDragging","dragging","addDragSource","includeTouch","mouseListener","onMouseDown","addEventListener","touchListener","suppressTouch","isSuppressTouch","onTouchStart","push","touchEvent","currentDragParams","touch","touches","touchLastTime","touchStart","touchMoveEvent","e","onTouchMove","touchEndEvent","onTouchUp","documentTouchMove","cancelable","preventDefault","events","document","type","listener","options","addTemporaryEvents","dragStartPixels","onCommonMove","mouseEvent","skipMouseEvent","_alreadyProcessedByDragService","button","mouseStartEvent","mouseMoveEvent","event","onMouseMove","mouseUpEvent","onMouseUp","contextEvent","currentEvent","isEventNearStartEvent","startEvent","requiredPixelDiff","getFirstActiveTouch","touchList","identifier","el","event_1","EVENT_DRAG_STARTED","api","gridApi","columnApi","eventService","dispatchEvent","onDragStart","onDragging","changedTouches","onUpCommon","eventOrTouch","onDragStop","event_2","EVENT_DRAG_STOPPED","func"],"mappings":"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","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.0.0\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Bean, PreDestroy, Autowired, PostConstruct } from \"../context/context\";\nimport { Events } from \"../events\";\nimport { BeanStub } from \"../context/beanStub\";\nimport { find, exists } from \"../utils/generic\";\nimport { removeFromArray } from \"../utils/array\";\nimport { addOrRemoveCssClass } from \"../utils/dom\";\nimport { areEventsNear } from \"../utils/mouse\";\n/** Adds drag listening onto an element. In AG Grid this is used twice, first is resizing columns,\n * second is moving the columns and column groups around (ie the 'drag' part of Drag and Drop. */\nvar DragService = /** @class */ (function (_super) {\n    __extends(DragService, _super);\n    function DragService() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dragEndFunctions = [];\n        _this.dragSources = [];\n        return _this;\n    }\n    DragService.prototype.init = function () {\n        this.logger = this.loggerFactory.create('DragService');\n    };\n    DragService.prototype.removeAllListeners = function () {\n        this.dragSources.forEach(this.removeListener.bind(this));\n        this.dragSources.length = 0;\n    };\n    DragService.prototype.removeListener = function (dragSourceAndListener) {\n        var element = dragSourceAndListener.dragSource.eElement;\n        var mouseDownListener = dragSourceAndListener.mouseDownListener;\n        element.removeEventListener('mousedown', mouseDownListener);\n        // remove touch listener only if it exists\n        if (dragSourceAndListener.touchEnabled) {\n            var touchStartListener = dragSourceAndListener.touchStartListener;\n            element.removeEventListener('touchstart', touchStartListener, { passive: true });\n        }\n    };\n    DragService.prototype.removeDragSource = function (params) {\n        var dragSourceAndListener = find(this.dragSources, function (item) { return item.dragSource === params; });\n        if (!dragSourceAndListener) {\n            return;\n        }\n        this.removeListener(dragSourceAndListener);\n        removeFromArray(this.dragSources, dragSourceAndListener);\n    };\n    DragService.prototype.setNoSelectToBody = function (noSelect) {\n        var eDocument = this.gridOptionsWrapper.getDocument();\n        var eBody = eDocument.querySelector('body');\n        if (exists(eBody)) {\n            // when we drag the mouse in AG Grid, this class gets added / removed from the body, so that\n            // the mouse isn't selecting text when dragging.\n            addOrRemoveCssClass(eBody, 'ag-unselectable', noSelect);\n        }\n    };\n    DragService.prototype.isDragging = function () {\n        return this.dragging;\n    };\n    DragService.prototype.addDragSource = function (params, includeTouch) {\n        if (includeTouch === void 0) { includeTouch = false; }\n        var mouseListener = this.onMouseDown.bind(this, params);\n        params.eElement.addEventListener('mousedown', mouseListener);\n        var touchListener = null;\n        var suppressTouch = this.gridOptionsWrapper.isSuppressTouch();\n        if (includeTouch && !suppressTouch) {\n            touchListener = this.onTouchStart.bind(this, params);\n            params.eElement.addEventListener('touchstart', touchListener, { passive: true });\n        }\n        this.dragSources.push({\n            dragSource: params,\n            mouseDownListener: mouseListener,\n            touchStartListener: touchListener,\n            touchEnabled: includeTouch\n        });\n    };\n    // gets called whenever mouse down on any drag source\n    DragService.prototype.onTouchStart = function (params, touchEvent) {\n        var _this = this;\n        this.currentDragParams = params;\n        this.dragging = false;\n        var touch = touchEvent.touches[0];\n        this.touchLastTime = touch;\n        this.touchStart = touch;\n        var touchMoveEvent = function (e) { return _this.onTouchMove(e, params.eElement); };\n        var touchEndEvent = function (e) { return _this.onTouchUp(e, params.eElement); };\n        var documentTouchMove = function (e) { if (e.cancelable) {\n            e.preventDefault();\n        } };\n        var target = params.eElement;\n        var events = [\n            // Prevents the page document from moving while we are dragging items around.\n            // preventDefault needs to be called in the touchmove listener and never inside the\n            // touchstart, because using touchstart causes the click event to be cancelled on touch devices.\n            { target: document, type: 'touchmove', listener: documentTouchMove, options: { passive: false } },\n            { target: target, type: 'touchmove', listener: touchMoveEvent, options: { passive: true } },\n            { target: target, type: 'touchend', listener: touchEndEvent, options: { passive: true } },\n            { target: target, type: 'touchcancel', listener: touchEndEvent, options: { passive: true } }\n        ];\n        // temporally add these listeners, for the duration of the drag\n        this.addTemporaryEvents(events);\n        // see if we want to start dragging straight away\n        if (params.dragStartPixels === 0) {\n            this.onCommonMove(touch, this.touchStart, params.eElement);\n        }\n    };\n    // gets called whenever mouse down on any drag source\n    DragService.prototype.onMouseDown = function (params, mouseEvent) {\n        var _this = this;\n        var e = mouseEvent;\n        if (params.skipMouseEvent && params.skipMouseEvent(mouseEvent)) {\n            return;\n        }\n        // if there are two elements with parent / child relationship, and both are draggable,\n        // when we drag the child, we should NOT drag the parent. an example of this is row moving\n        // and range selection - row moving should get preference when use drags the rowDrag component.\n        if (e._alreadyProcessedByDragService) {\n            return;\n        }\n        e._alreadyProcessedByDragService = true;\n        // only interested in left button clicks\n        if (mouseEvent.button !== 0) {\n            return;\n        }\n        this.currentDragParams = params;\n        this.dragging = false;\n        this.mouseStartEvent = mouseEvent;\n        var eDocument = this.gridOptionsWrapper.getDocument();\n        this.setNoSelectToBody(true);\n        var mouseMoveEvent = function (event) { return _this.onMouseMove(event, params.eElement); };\n        var mouseUpEvent = function (event) { return _this.onMouseUp(event, params.eElement); };\n        var contextEvent = function (event) { return event.preventDefault(); };\n        var target = eDocument;\n        var events = [\n            { target: target, type: 'mousemove', listener: mouseMoveEvent },\n            { target: target, type: 'mouseup', listener: mouseUpEvent },\n            { target: target, type: 'contextmenu', listener: contextEvent }\n        ];\n        // temporally add these listeners, for the duration of the drag\n        this.addTemporaryEvents(events);\n        //see if we want to start dragging straight away\n        if (params.dragStartPixels === 0) {\n            this.onMouseMove(mouseEvent, params.eElement);\n        }\n    };\n    DragService.prototype.addTemporaryEvents = function (events) {\n        events.forEach(function (currentEvent) {\n            var target = currentEvent.target, type = currentEvent.type, listener = currentEvent.listener, options = currentEvent.options;\n            target.addEventListener(type, listener, options);\n        });\n        this.dragEndFunctions.push(function () {\n            events.forEach(function (currentEvent) {\n                var target = currentEvent.target, type = currentEvent.type, listener = currentEvent.listener, options = currentEvent.options;\n                target.removeEventListener(type, listener, options);\n            });\n        });\n    };\n    // returns true if the event is close to the original event by X pixels either vertically or horizontally.\n    // we only start dragging after X pixels so this allows us to know if we should start dragging yet.\n    DragService.prototype.isEventNearStartEvent = function (currentEvent, startEvent) {\n        // by default, we wait 4 pixels before starting the drag\n        var dragStartPixels = this.currentDragParams.dragStartPixels;\n        var requiredPixelDiff = exists(dragStartPixels) ? dragStartPixels : 4;\n        return areEventsNear(currentEvent, startEvent, requiredPixelDiff);\n    };\n    DragService.prototype.getFirstActiveTouch = function (touchList) {\n        for (var i = 0; i < touchList.length; i++) {\n            if (touchList[i].identifier === this.touchStart.identifier) {\n                return touchList[i];\n            }\n        }\n        return null;\n    };\n    DragService.prototype.onCommonMove = function (currentEvent, startEvent, el) {\n        if (!this.dragging) {\n            // if mouse hasn't travelled from the start position enough, do nothing\n            if (!this.dragging && this.isEventNearStartEvent(currentEvent, startEvent)) {\n                return;\n            }\n            this.dragging = true;\n            var event_1 = {\n                type: Events.EVENT_DRAG_STARTED,\n                api: this.gridApi,\n                columnApi: this.columnApi,\n                target: el\n            };\n            this.eventService.dispatchEvent(event_1);\n            this.currentDragParams.onDragStart(startEvent);\n            // we need ONE drag action at the startEvent, so that we are guaranteed the drop target\n            // at the start gets notified. this is because the drag can start outside of the element\n            // that started it, as the mouse is allowed drag away from the mouse down before it's\n            // considered a drag (the isEventNearStartEvent() above). if we didn't do this, then\n            // it would be possible to click a column by the edge, then drag outside of the drop zone\n            // in less than 4 pixels and the drag officially starts outside of the header but the header\n            // wouldn't be notified of the dragging.\n            this.currentDragParams.onDragging(startEvent);\n        }\n        this.currentDragParams.onDragging(currentEvent);\n    };\n    DragService.prototype.onTouchMove = function (touchEvent, el) {\n        var touch = this.getFirstActiveTouch(touchEvent.touches);\n        if (!touch) {\n            return;\n        }\n        // this.___statusPanel.setInfoText(Math.random() + ' onTouchMove preventDefault stopPropagation');\n        this.onCommonMove(touch, this.touchStart, el);\n    };\n    // only gets called after a mouse down - as this is only added after mouseDown\n    // and is removed when mouseUp happens\n    DragService.prototype.onMouseMove = function (mouseEvent, el) {\n        this.onCommonMove(mouseEvent, this.mouseStartEvent, el);\n    };\n    DragService.prototype.onTouchUp = function (touchEvent, el) {\n        var touch = this.getFirstActiveTouch(touchEvent.changedTouches);\n        // i haven't worked this out yet, but there is no matching touch\n        // when we get the touch up event. to get around this, we swap in\n        // the last touch. this is a hack to 'get it working' while we\n        // figure out what's going on, why we are not getting a touch in\n        // current event.\n        if (!touch) {\n            touch = this.touchLastTime;\n        }\n        // if mouse was left up before we started to move, then this is a tap.\n        // we check this before onUpCommon as onUpCommon resets the dragging\n        // let tap = !this.dragging;\n        // let tapTarget = this.currentDragParams.eElement;\n        this.onUpCommon(touch, el);\n        // if tap, tell user\n        // console.log(`${Math.random()} tap = ${tap}`);\n        // if (tap) {\n        //     tapTarget.click();\n        // }\n    };\n    DragService.prototype.onMouseUp = function (mouseEvent, el) {\n        this.onUpCommon(mouseEvent, el);\n    };\n    DragService.prototype.onUpCommon = function (eventOrTouch, el) {\n        if (this.dragging) {\n            this.dragging = false;\n            this.currentDragParams.onDragStop(eventOrTouch);\n            var event_2 = {\n                type: Events.EVENT_DRAG_STOPPED,\n                api: this.gridApi,\n                columnApi: this.columnApi,\n                target: el\n            };\n            this.eventService.dispatchEvent(event_2);\n        }\n        this.setNoSelectToBody(false);\n        this.mouseStartEvent = null;\n        this.touchStart = null;\n        this.touchLastTime = null;\n        this.currentDragParams = null;\n        this.dragEndFunctions.forEach(function (func) { return func(); });\n        this.dragEndFunctions.length = 0;\n    };\n    __decorate([\n        Autowired('loggerFactory')\n    ], DragService.prototype, \"loggerFactory\", void 0);\n    __decorate([\n        Autowired('columnApi')\n    ], DragService.prototype, \"columnApi\", void 0);\n    __decorate([\n        Autowired('gridApi')\n    ], DragService.prototype, \"gridApi\", void 0);\n    __decorate([\n        PostConstruct\n    ], DragService.prototype, \"init\", null);\n    __decorate([\n        PreDestroy\n    ], DragService.prototype, \"removeAllListeners\", null);\n    DragService = __decorate([\n        Bean('dragService')\n    ], DragService);\n    return DragService;\n}(BeanStub));\nexport { DragService };\n"]},"metadata":{},"sourceType":"module"}