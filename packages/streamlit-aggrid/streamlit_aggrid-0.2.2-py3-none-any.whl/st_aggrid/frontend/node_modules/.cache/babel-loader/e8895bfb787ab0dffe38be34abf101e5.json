{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { TabGuardComp, KeyCode, Autowired, _, PostConstruct } from \"@ag-grid-community/core\";\nimport { MenuItemComponent } from \"./menuItemComponent\";\n\nvar MenuList = function (_super) {\n  __extends(MenuList, _super);\n\n  function MenuList(level) {\n    if (level === void 0) {\n      level = 1;\n    }\n\n    var _this = _super.call(this,\n    /* html */\n    \"<div class=\\\"ag-menu-list\\\" role=\\\"tree\\\"></div>\") || this;\n\n    _this.level = level;\n    _this.menuItems = [];\n    return _this;\n  }\n\n  MenuList.prototype.postConstruct = function () {\n    var _this = this;\n\n    this.initialiseTabGuard({\n      onTabKeyDown: function onTabKeyDown(e) {\n        return _this.onTabKeyDown(e);\n      },\n      handleKeyDown: function handleKeyDown(e) {\n        return _this.handleKeyDown(e);\n      }\n    });\n  };\n\n  MenuList.prototype.onTabKeyDown = function (e) {\n    var parent = this.getParentComponent();\n    var parentGui = parent && parent.getGui();\n\n    var isManaged = parentGui && _.containsClass(parentGui, 'ag-focus-managed');\n\n    if (!isManaged) {\n      e.preventDefault();\n    }\n\n    if (e.shiftKey) {\n      this.closeIfIsChild(e);\n    }\n  };\n\n  MenuList.prototype.handleKeyDown = function (e) {\n    switch (e.keyCode) {\n      case KeyCode.UP:\n      case KeyCode.RIGHT:\n      case KeyCode.DOWN:\n      case KeyCode.LEFT:\n        e.preventDefault();\n        this.handleNavKey(e.keyCode);\n        break;\n\n      case KeyCode.ESCAPE:\n        var topMenu = this.findTopMenu();\n\n        if (topMenu) {\n          this.focusService.focusInto(topMenu.getGui());\n        }\n\n        break;\n    }\n  };\n\n  MenuList.prototype.clearActiveItem = function () {\n    if (this.activeMenuItem) {\n      this.activeMenuItem.deactivate();\n      this.activeMenuItem = null;\n    }\n  };\n\n  MenuList.prototype.addMenuItems = function (menuItems) {\n    var _this = this;\n\n    if (menuItems == null) {\n      return;\n    }\n\n    menuItems.forEach(function (menuItemOrString) {\n      if (menuItemOrString === 'separator') {\n        _this.addSeparator();\n      } else if (typeof menuItemOrString === 'string') {\n        console.warn(\"AG Grid: unrecognised menu item \" + menuItemOrString);\n      } else {\n        _this.addItem(menuItemOrString);\n      }\n    });\n  };\n\n  MenuList.prototype.addItem = function (menuItemDef) {\n    var _this = this;\n\n    var menuItem = this.createManagedBean(new MenuItemComponent(__assign(__assign({}, menuItemDef), {\n      isAnotherSubMenuOpen: function isAnotherSubMenuOpen() {\n        return _.some(_this.menuItems, function (m) {\n          return m.isSubMenuOpen();\n        });\n      }\n    })));\n    menuItem.setParentComponent(this);\n\n    _.setAriaLevel(menuItem.getGui(), this.level);\n\n    this.menuItems.push(menuItem);\n    this.appendChild(menuItem.getGui());\n    this.addManagedListener(menuItem, MenuItemComponent.EVENT_MENU_ITEM_SELECTED, function (event) {\n      _this.dispatchEvent(event);\n    });\n    this.addManagedListener(menuItem, MenuItemComponent.EVENT_MENU_ITEM_ACTIVATED, function (event) {\n      if (_this.activeMenuItem && _this.activeMenuItem !== event.menuItem) {\n        _this.activeMenuItem.deactivate();\n      }\n\n      _this.activeMenuItem = event.menuItem;\n    });\n  };\n\n  MenuList.prototype.activateFirstItem = function () {\n    var item = this.menuItems.filter(function (currentItem) {\n      return !currentItem.isDisabled();\n    })[0];\n\n    if (!item) {\n      return;\n    }\n\n    item.activate();\n  };\n\n  MenuList.prototype.addSeparator = function () {\n    var separatorHtml =\n    /* html */\n    \"\\n            <div class=\\\"ag-menu-separator\\\" aria-hidden=\\\"true\\\">\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n            </div>\";\n    this.appendChild(_.loadTemplate(separatorHtml));\n  };\n\n  MenuList.prototype.findTopMenu = function () {\n    var parent = this.getParentComponent();\n\n    if (!parent && this instanceof MenuList) {\n      return this;\n    }\n\n    while (true) {\n      var nextParent = parent && parent.getParentComponent && parent.getParentComponent();\n\n      if (!nextParent || !(nextParent instanceof MenuList || nextParent instanceof MenuItemComponent)) {\n        break;\n      }\n\n      parent = nextParent;\n    }\n\n    return parent instanceof MenuList ? parent : undefined;\n  };\n\n  MenuList.prototype.handleNavKey = function (key) {\n    switch (key) {\n      case KeyCode.UP:\n      case KeyCode.DOWN:\n        var nextItem = this.findNextItem(key === KeyCode.UP);\n\n        if (nextItem && nextItem !== this.activeMenuItem) {\n          nextItem.activate();\n        }\n\n        return;\n    }\n\n    var left = this.gridOptionsWrapper.isEnableRtl() ? KeyCode.RIGHT : KeyCode.LEFT;\n\n    if (key === left) {\n      this.closeIfIsChild();\n    } else {\n      this.openChild();\n    }\n  };\n\n  MenuList.prototype.closeIfIsChild = function (e) {\n    var parentItem = this.getParentComponent();\n\n    if (parentItem && parentItem instanceof MenuItemComponent) {\n      if (e) {\n        e.preventDefault();\n      }\n\n      parentItem.closeSubMenu();\n      parentItem.getGui().focus();\n    }\n  };\n\n  MenuList.prototype.openChild = function () {\n    if (this.activeMenuItem) {\n      this.activeMenuItem.openSubMenu(true);\n    }\n  };\n\n  MenuList.prototype.findNextItem = function (up) {\n    var items = this.menuItems.filter(function (item) {\n      return !item.isDisabled();\n    });\n\n    if (!items.length) {\n      return;\n    }\n\n    if (!this.activeMenuItem) {\n      return up ? _.last(items) : items[0];\n    }\n\n    if (up) {\n      items.reverse();\n    }\n\n    var nextItem;\n    var foundCurrent = false;\n\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n\n      if (!foundCurrent) {\n        if (item === this.activeMenuItem) {\n          foundCurrent = true;\n        }\n\n        continue;\n      }\n\n      nextItem = item;\n      break;\n    }\n\n    return nextItem || this.activeMenuItem;\n  };\n\n  MenuList.prototype.destroy = function () {\n    this.clearActiveItem();\n\n    _super.prototype.destroy.call(this);\n  };\n\n  __decorate([Autowired('focusService')], MenuList.prototype, \"focusService\", void 0);\n\n  __decorate([PostConstruct], MenuList.prototype, \"postConstruct\", null);\n\n  return MenuList;\n}(TabGuardComp);\n\nexport { MenuList };","map":{"version":3,"sources":["C:/dev/streamlit-aggrid/st_aggrid/frontend/node_modules/@ag-grid-enterprise/menu/dist/es6/menu/menuList.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","TabGuardComp","KeyCode","Autowired","_","PostConstruct","MenuItemComponent","MenuList","_super","level","_this","menuItems","postConstruct","initialiseTabGuard","onTabKeyDown","e","handleKeyDown","parent","getParentComponent","parentGui","getGui","isManaged","containsClass","preventDefault","shiftKey","closeIfIsChild","keyCode","UP","RIGHT","DOWN","LEFT","handleNavKey","ESCAPE","topMenu","findTopMenu","focusService","focusInto","clearActiveItem","activeMenuItem","deactivate","addMenuItems","forEach","menuItemOrString","addSeparator","console","warn","addItem","menuItemDef","menuItem","createManagedBean","isAnotherSubMenuOpen","some","m","isSubMenuOpen","setParentComponent","setAriaLevel","push","appendChild","addManagedListener","EVENT_MENU_ITEM_SELECTED","event","dispatchEvent","EVENT_MENU_ITEM_ACTIVATED","activateFirstItem","item","filter","currentItem","isDisabled","activate","separatorHtml","loadTemplate","nextParent","undefined","nextItem","findNextItem","left","gridOptionsWrapper","isEnableRtl","openChild","parentItem","closeSubMenu","focus","openSubMenu","up","items","last","reverse","foundCurrent","destroy"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { TabGuardComp, KeyCode, Autowired, _, PostConstruct } from \"@ag-grid-community/core\";\nimport { MenuItemComponent } from \"./menuItemComponent\";\nvar MenuList = /** @class */ (function (_super) {\n    __extends(MenuList, _super);\n    function MenuList(level) {\n        if (level === void 0) { level = 1; }\n        var _this = _super.call(this, /* html */ \"<div class=\\\"ag-menu-list\\\" role=\\\"tree\\\"></div>\") || this;\n        _this.level = level;\n        _this.menuItems = [];\n        return _this;\n    }\n    MenuList.prototype.postConstruct = function () {\n        var _this = this;\n        this.initialiseTabGuard({\n            onTabKeyDown: function (e) { return _this.onTabKeyDown(e); },\n            handleKeyDown: function (e) { return _this.handleKeyDown(e); }\n        });\n    };\n    MenuList.prototype.onTabKeyDown = function (e) {\n        var parent = this.getParentComponent();\n        var parentGui = parent && parent.getGui();\n        var isManaged = parentGui && _.containsClass(parentGui, 'ag-focus-managed');\n        if (!isManaged) {\n            e.preventDefault();\n        }\n        if (e.shiftKey) {\n            this.closeIfIsChild(e);\n        }\n    };\n    MenuList.prototype.handleKeyDown = function (e) {\n        switch (e.keyCode) {\n            case KeyCode.UP:\n            case KeyCode.RIGHT:\n            case KeyCode.DOWN:\n            case KeyCode.LEFT:\n                e.preventDefault();\n                this.handleNavKey(e.keyCode);\n                break;\n            case KeyCode.ESCAPE:\n                var topMenu = this.findTopMenu();\n                if (topMenu) {\n                    this.focusService.focusInto(topMenu.getGui());\n                }\n                break;\n        }\n    };\n    MenuList.prototype.clearActiveItem = function () {\n        if (this.activeMenuItem) {\n            this.activeMenuItem.deactivate();\n            this.activeMenuItem = null;\n        }\n    };\n    MenuList.prototype.addMenuItems = function (menuItems) {\n        var _this = this;\n        if (menuItems == null) {\n            return;\n        }\n        menuItems.forEach(function (menuItemOrString) {\n            if (menuItemOrString === 'separator') {\n                _this.addSeparator();\n            }\n            else if (typeof menuItemOrString === 'string') {\n                console.warn(\"AG Grid: unrecognised menu item \" + menuItemOrString);\n            }\n            else {\n                _this.addItem(menuItemOrString);\n            }\n        });\n    };\n    MenuList.prototype.addItem = function (menuItemDef) {\n        var _this = this;\n        var menuItem = this.createManagedBean(new MenuItemComponent(__assign(__assign({}, menuItemDef), { isAnotherSubMenuOpen: function () { return _.some(_this.menuItems, function (m) { return m.isSubMenuOpen(); }); } })));\n        menuItem.setParentComponent(this);\n        _.setAriaLevel(menuItem.getGui(), this.level);\n        this.menuItems.push(menuItem);\n        this.appendChild(menuItem.getGui());\n        this.addManagedListener(menuItem, MenuItemComponent.EVENT_MENU_ITEM_SELECTED, function (event) {\n            _this.dispatchEvent(event);\n        });\n        this.addManagedListener(menuItem, MenuItemComponent.EVENT_MENU_ITEM_ACTIVATED, function (event) {\n            if (_this.activeMenuItem && _this.activeMenuItem !== event.menuItem) {\n                _this.activeMenuItem.deactivate();\n            }\n            _this.activeMenuItem = event.menuItem;\n        });\n    };\n    MenuList.prototype.activateFirstItem = function () {\n        var item = this.menuItems.filter(function (currentItem) { return !currentItem.isDisabled(); })[0];\n        if (!item) {\n            return;\n        }\n        item.activate();\n    };\n    MenuList.prototype.addSeparator = function () {\n        var separatorHtml = /* html */ \"\\n            <div class=\\\"ag-menu-separator\\\" aria-hidden=\\\"true\\\">\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n            </div>\";\n        this.appendChild(_.loadTemplate(separatorHtml));\n    };\n    MenuList.prototype.findTopMenu = function () {\n        var parent = this.getParentComponent();\n        if (!parent && this instanceof MenuList) {\n            return this;\n        }\n        while (true) {\n            var nextParent = parent && parent.getParentComponent && parent.getParentComponent();\n            if (!nextParent || (!(nextParent instanceof MenuList || nextParent instanceof MenuItemComponent))) {\n                break;\n            }\n            parent = nextParent;\n        }\n        return parent instanceof MenuList ? parent : undefined;\n    };\n    MenuList.prototype.handleNavKey = function (key) {\n        switch (key) {\n            case KeyCode.UP:\n            case KeyCode.DOWN:\n                var nextItem = this.findNextItem(key === KeyCode.UP);\n                if (nextItem && nextItem !== this.activeMenuItem) {\n                    nextItem.activate();\n                }\n                return;\n        }\n        var left = this.gridOptionsWrapper.isEnableRtl() ? KeyCode.RIGHT : KeyCode.LEFT;\n        if (key === left) {\n            this.closeIfIsChild();\n        }\n        else {\n            this.openChild();\n        }\n    };\n    MenuList.prototype.closeIfIsChild = function (e) {\n        var parentItem = this.getParentComponent();\n        if (parentItem && parentItem instanceof MenuItemComponent) {\n            if (e) {\n                e.preventDefault();\n            }\n            parentItem.closeSubMenu();\n            parentItem.getGui().focus();\n        }\n    };\n    MenuList.prototype.openChild = function () {\n        if (this.activeMenuItem) {\n            this.activeMenuItem.openSubMenu(true);\n        }\n    };\n    MenuList.prototype.findNextItem = function (up) {\n        var items = this.menuItems.filter(function (item) { return !item.isDisabled(); });\n        if (!items.length) {\n            return;\n        }\n        if (!this.activeMenuItem) {\n            return up ? _.last(items) : items[0];\n        }\n        if (up) {\n            items.reverse();\n        }\n        var nextItem;\n        var foundCurrent = false;\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            if (!foundCurrent) {\n                if (item === this.activeMenuItem) {\n                    foundCurrent = true;\n                }\n                continue;\n            }\n            nextItem = item;\n            break;\n        }\n        return nextItem || this.activeMenuItem;\n    };\n    MenuList.prototype.destroy = function () {\n        this.clearActiveItem();\n        _super.prototype.destroy.call(this);\n    };\n    __decorate([\n        Autowired('focusService')\n    ], MenuList.prototype, \"focusService\", void 0);\n    __decorate([\n        PostConstruct\n    ], MenuList.prototype, \"postConstruct\", null);\n    return MenuList;\n}(TabGuardComp));\nexport { MenuList };\n"]},"metadata":{},"sourceType":"module"}