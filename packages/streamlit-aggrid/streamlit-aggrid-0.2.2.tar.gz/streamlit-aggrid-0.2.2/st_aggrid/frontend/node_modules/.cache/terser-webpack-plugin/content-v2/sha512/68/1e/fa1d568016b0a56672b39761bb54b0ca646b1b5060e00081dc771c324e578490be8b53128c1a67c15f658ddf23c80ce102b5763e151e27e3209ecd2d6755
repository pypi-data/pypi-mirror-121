{"code":"(this[\"webpackJsonpstreamlit-aggrid\"]=this[\"webpackJsonpstreamlit-aggrid\"]||[]).push([[0],{245:function(e,t,r){},247:function(e,t,r){\"use strict\";r.r(t);var a=r(38),n=r.n(a),i=r(101),o=r.n(i),s=r(3),u=r(7),d=r(5),c=r(6),l=r(190),p=r(210),m=r(0),h=r(90),f=r(212),g=r(33),v=r(250),y=r(251),b=r(252);var O=function e(t,r){var a=function(t){return null!==t&&\"object\"===typeof t?e(t,r):r(t)};return Array.isArray(t)?t.map(a):\"object\"===typeof t?function(e,t){return Object.keys(e).reduce((function(r,a){return r[a]=t(e[a]),r}),{})}(t,a):t},F=r(211),_=(r(242),r(243),r(244),r(245),r(66)),j=function(e){Object(d.a)(r,e);var t=Object(c.a)(r);function r(e){var a,n=this;Object(s.a)(this,r),(a=t.call(this,e)).frameDtypes=void 0,a.api=void 0,a.columnApi=void 0,a.columnFormaters=void 0,a.manualUpdateRequested=!1,a.allowUnsafeJsCode=!1,a.fitColumnsOnGridLoad=!1,a.gridOptions=void 0,a.convertJavascriptCodeOnGridOptions=function(e){return O(e,a.convertStringToFunction)},a.render=function(){return void 0!==a.api&&a.state.should_update&&a.api.setRowData(a.state.rowData),Object(_.jsxs)(\"div\",{className:\"ag-theme-\"+a.props.args.theme,style:a.defineContainerHeight(),children:[Object(_.jsx)(n.ManualUpdateButton,{manual_update:a.manualUpdateRequested,onClick:function(e){return a.returnGridValue(e)}}),Object(_.jsx)(p.AgGridReact,{onGridReady:function(e){return a.onGridReady(e)},gridOptions:a.gridOptions})]})},e.args.enable_enterprise_modules?(m.ModuleRegistry.registerModules(f.a),\"license_key\"in e.args&&g.b.setLicenseKey(e.args.license_key)):m.ModuleRegistry.registerModules(h.a),a.frameDtypes=a.props.args.frame_dtypes,a.manualUpdateRequested=1===a.props.args.update_mode,a.allowUnsafeJsCode=a.props.args.allow_unsafe_jscode,a.fitColumnsOnGridLoad=a.props.args.fit_columns_on_grid_load,a.columnFormaters={columnTypes:{dateColumnFilter:{filter:\"agDateColumnFilter\",filterParams:{comparator:function(e,t){return Object(v.a)(Object(y.a)(t),e)}}},numberColumnFilter:{filter:\"agNumberColumnFilter\"},shortDateTimeFormat:{valueFormatter:function(e){return a.dateFormatter(e.value,\"dd/MM/yyyy HH:mm\")}},customDateTimeFormat:{valueFormatter:function(e){return a.dateFormatter(e.value,e.column.colDef.custom_format_string)}},customNumericFormat:{valueFormatter:function(e){var t;return a.numberFormatter(e.value,null!==(t=e.column.colDef.precision)&&void 0!==t?t:2)}},customCurrencyFormat:{valueFormatter:function(e){return a.currencyFormatter(e.value,e.column.colDef.custom_currency_symbol)}},timedeltaFormat:{valueFormatter:function(e){return Object(F.duration)(e.value).humanize(!0)}}}};var i=Object.assign({},a.columnFormaters,a.props.args.gridOptions);return a.allowUnsafeJsCode&&(console.warn(\"flag allow_unsafe_jscode is on.\"),i=a.convertJavascriptCodeOnGridOptions(i)),a.gridOptions=i,a.state={rowData:JSON.parse(e.args.row_data),gridHeight:a.props.args.height,should_update:!1},a}return Object(u.a)(r,[{key:\"convertStringToFunction\",value:function(e){var t=\"--x_x--0_0--\",r=new RegExp(\"\".concat(t,\"\\\\s*(function\\\\s*.*)\\\\s*\").concat(t)).exec(e);if(r){var a=r[1];return new Function(\"return \"+a)()}return e}},{key:\"setUpdateMode\",value:function(){var e=this;if(!this.manualUpdateRequested){var t=this.props.args.update_mode;2===(2&t)&&this.api.addEventListener(\"cellValueChanged\",(function(t){return e.returnGridValue(t)})),4===(4&t)&&this.api.addEventListener(\"selectionChanged\",(function(t){return e.returnGridValue(t)})),8===(8&t)&&this.api.addEventListener(\"filterChanged\",(function(t){return e.returnGridValue(t)})),16===(16&t)&&this.api.addEventListener(\"sortChanged\",(function(t){return e.returnGridValue(t)}))}}},{key:\"onGridReady\",value:function(e){var t=this;for(var r in this.api=e.api,this.columnApi=e.columnApi,this.setUpdateMode(),this.api.addEventListener(\"firstDataRendered\",(function(e){return t.fitColumns()})),this.api.setRowData(this.state.rowData),this.gridOptions.preSelectedRows)this.api.selectIndex(this.gridOptions.preSelectedRows[r],!0,!0)}},{key:\"fitColumns\",value:function(){this.fitColumnsOnGridLoad?this.api.sizeColumnsToFit():this.columnApi.autoSizeAllColumns()}},{key:\"dateFormatter\",value:function(e,t){try{var r=Object(y.a)(e);return Object(b.a)(r,t)}catch(a){return e}}},{key:\"currencyFormatter\",value:function(e,t){var r=Number.parseFloat(e);return Number.isNaN(r)?e:t+r.toFixed(2)}},{key:\"numberFormatter\",value:function(e,t){var r=Number.parseFloat(e);return Number.isNaN(r)?e:r.toFixed(t)}},{key:\"returnGridValue\",value:function(e){var t=[];switch(this.props.args.data_return_mode){case 0:this.api.forEachLeafNode((function(e){return t.push(e.data)}));break;case 1:this.api.forEachNodeAfterFilter((function(e){e.group||t.push(e.data)}));break;case 2:this.api.forEachNodeAfterFilterAndSort((function(e){e.group||t.push(e.data)}))}var r={originalDtypes:this.frameDtypes,rowData:t,selectedRows:this.api.getSelectedRows()};l.a.setComponentValue(r)}},{key:\"ManualUpdateButton\",value:function(e){return e.manual_update?Object(_.jsx)(\"button\",{onClick:e.onClick,children:\"Update\"}):Object(_.jsx)(\"span\",{})}},{key:\"defineContainerHeight\",value:function(){return\"domLayout\"in this.gridOptions&&\"autoHeight\"===this.gridOptions.domLayout?{width:this.props.width}:{width:this.props.width,height:this.state.gridHeight}}}],[{key:\"getDerivedStateFromProps\",value:function(e,t){return e.args.reload_data?{rowData:JSON.parse(e.args.row_data),gridHeight:e.args.height,should_update:!0}:{gridHeight:e.args.height}}}]),r}(l.b),w=Object(l.c)(j);o.a.render(Object(_.jsx)(n.a.StrictMode,{children:Object(_.jsx)(w,{})}),document.getElementById(\"root\"))}},[[247,1,2]]]);","name":"static/js/main.372cd9cc.chunk.js","map":{"version":3,"sources":["static/js/main.372cd9cc.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","classCallCheck","createClass","inherits","createSuper","dist","main","es6_main","dist_es6_main","all_modules_dist_es6_main","core_dist_es6_main","compareAsc","parseISO","format","utils","deepMap","obj","fn","deepMapper","val","Array","isArray","map","Object","keys","reduce","res","key","mapObject","moment","jsx_runtime","AgGrid_AgGrid","_StreamlitComponentBa","AgGrid","_super","props","_this","_this2","call","frameDtypes","api","columnApi","columnFormaters","manualUpdateRequested","allowUnsafeJsCode","fitColumnsOnGridLoad","gridOptions","convertJavascriptCodeOnGridOptions","convertStringToFunction","render","undefined","state","should_update","setRowData","rowData","className","args","theme","style","defineContainerHeight","children","ManualUpdateButton","manual_update","onClick","e","returnGridValue","onGridReady","enable_enterprise_modules","registerModules","setLicenseKey","frame_dtypes","update_mode","allow_unsafe_jscode","fit_columns_on_grid_load","columnTypes","dateColumnFilter","filter","filterParams","comparator","filterValue","cellValue","numberColumnFilter","shortDateTimeFormat","valueFormatter","params","dateFormatter","value","customDateTimeFormat","column","colDef","custom_format_string","customNumericFormat","_params$column$colDef","numberFormatter","precision","customCurrencyFormat","currencyFormatter","custom_currency_symbol","timedeltaFormat","humanize","assign","console","warn","JSON","parse","row_data","gridHeight","height","v","JS_PLACEHOLDER","match","RegExp","concat","exec","funcStr","Function","_this3","updateMode","addEventListener","event","_this4","idx","setUpdateMode","fitColumns","selectIndex","sizeColumnsToFit","autoSizeAllColumns","isoString","formaterString","date","_unused","number","currencySymbol","Number","parseFloat","isNaN","toFixed","returnData","data_return_mode","forEachLeafNode","row","data","forEachNodeAfterFilter","group","forEachNodeAfterFilterAndSort","returnValue","originalDtypes","selectedRows","getSelectedRows","setComponentValue","width","reload_data","src_AgGrid_0","a","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpstreamlit-aggrid\"] = this[\"webpackJsonpstreamlit-aggrid\"] || []).push([[0],{\n\n/***/ 245:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 247:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(38);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(101);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(3);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\nvar inherits = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\nvar createSuper = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/streamlit-component-lib/dist/index.js + 132 modules\nvar dist = __webpack_require__(190);\n\n// EXTERNAL MODULE: ./node_modules/@ag-grid-community/react/main.js\nvar main = __webpack_require__(210);\n\n// EXTERNAL MODULE: ./node_modules/@ag-grid-community/core/dist/es6/main.js\nvar es6_main = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/@ag-grid-community/all-modules/dist/es6/main.js + 15 modules\nvar dist_es6_main = __webpack_require__(90);\n\n// EXTERNAL MODULE: ./node_modules/@ag-grid-enterprise/all-modules/dist/es6/main.js + 358 modules\nvar all_modules_dist_es6_main = __webpack_require__(212);\n\n// EXTERNAL MODULE: ./node_modules/@ag-grid-enterprise/core/dist/es6/main.js + 4 modules\nvar core_dist_es6_main = __webpack_require__(33);\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/compareAsc/index.js\nvar compareAsc = __webpack_require__(250);\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/parseISO/index.js\nvar parseISO = __webpack_require__(251);\n\n// EXTERNAL MODULE: ./node_modules/date-fns-tz/esm/format/index.js + 35 modules\nvar format = __webpack_require__(252);\n\n// CONCATENATED MODULE: ./src/utils.js\n// stole from https://github.com/andfanilo/streamlit-echarts/blob/master/streamlit_echarts/frontend/src/utils.js Thanks andfanilo\nfunction mapObject(obj,fn){return Object.keys(obj).reduce(function(res,key){res[key]=fn(obj[key]);return res;},{});}function deepMap(obj,fn){var deepMapper=function deepMapper(val){return val!==null&&typeof val===\"object\"?deepMap(val,fn):fn(val);};if(Array.isArray(obj)){return obj.map(deepMapper);}if(typeof obj===\"object\"){return mapObject(obj,deepMapper);}return obj;}/* harmony default export */ var utils = (deepMap);\n// EXTERNAL MODULE: ./node_modules/moment/moment.js\nvar moment = __webpack_require__(211);\n\n// EXTERNAL MODULE: ./node_modules/@ag-grid-community/core/dist/styles/ag-theme-blue.css\nvar ag_theme_blue = __webpack_require__(242);\n\n// EXTERNAL MODULE: ./node_modules/@ag-grid-community/core/dist/styles/ag-theme-fresh.css\nvar ag_theme_fresh = __webpack_require__(243);\n\n// EXTERNAL MODULE: ./node_modules/@ag-grid-community/core/dist/styles/ag-theme-material.css\nvar ag_theme_material = __webpack_require__(244);\n\n// EXTERNAL MODULE: ./src/AgGrid.scss\nvar src_AgGrid = __webpack_require__(245);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(66);\n\n// CONCATENATED MODULE: ./src/AgGrid.tsx\n// import '@ag-grid-community/core/dist/styles/ag-grid.css';\n// import '@ag-grid-community/core/dist/styles/ag-theme-balham.css';\n// import '@ag-grid-community/core/dist/styles/ag-theme-balham-dark.css';\n// import 'Agrid.scss'\n// import _ from 'lodash'\nvar AgGrid_AgGrid=/*#__PURE__*/function(_StreamlitComponentBa){Object(inherits[\"a\" /* default */])(AgGrid,_StreamlitComponentBa);var _super=Object(createSuper[\"a\" /* default */])(AgGrid);function AgGrid(props){var _this2=this;var _this;Object(classCallCheck[\"a\" /* default */])(this,AgGrid);_this=_super.call(this,props);_this.frameDtypes=void 0;_this.api=void 0;_this.columnApi=void 0;_this.columnFormaters=void 0;_this.manualUpdateRequested=false;_this.allowUnsafeJsCode=false;_this.fitColumnsOnGridLoad=false;_this.gridOptions=void 0;_this.convertJavascriptCodeOnGridOptions=function(obj){return utils(obj,_this.convertStringToFunction);};_this.render=function(){if(_this.api!==undefined){if(_this.state.should_update){_this.api.setRowData(_this.state.rowData);}}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"ag-theme-\"+_this.props.args.theme,style:_this.defineContainerHeight(),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(_this2.ManualUpdateButton,{manual_update:_this.manualUpdateRequested,onClick:function onClick(e){return _this.returnGridValue(e);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(main[\"AgGridReact\"],{onGridReady:function onGridReady(e){return _this.onGridReady(e);},gridOptions:_this.gridOptions})]});};if(props.args.enable_enterprise_modules){es6_main[\"ModuleRegistry\"].registerModules(all_modules_dist_es6_main[\"a\" /* AllModules */]);if('license_key'in props.args){core_dist_es6_main[\"b\" /* LicenseManager */].setLicenseKey(props.args['license_key']);}}else{es6_main[\"ModuleRegistry\"].registerModules(dist_es6_main[\"a\" /* AllCommunityModules */]);}_this.frameDtypes=_this.props.args.frame_dtypes;_this.manualUpdateRequested=_this.props.args.update_mode===1;_this.allowUnsafeJsCode=_this.props.args.allow_unsafe_jscode;_this.fitColumnsOnGridLoad=_this.props.args.fit_columns_on_grid_load;// let themes = {\n//   'streamlit':'ag-theme-streamlit',\n//   'light':'ag-theme-light',\n//   'dark':'ag-theme-dark',\n//   'blue':'ag-theme-blue',\n//   'fresh':'ag-theme-fresh',\n//   'material':'ag-theme-material',\n// }\n_this.columnFormaters={columnTypes:{'dateColumnFilter':{filter:'agDateColumnFilter',filterParams:{comparator:function comparator(filterValue,cellValue){return Object(compareAsc[\"a\" /* default */])(Object(parseISO[\"a\" /* default */])(cellValue),filterValue);}}},'numberColumnFilter':{filter:'agNumberColumnFilter'},'shortDateTimeFormat':{valueFormatter:function valueFormatter(params){return _this.dateFormatter(params.value,\"dd/MM/yyyy HH:mm\");}},'customDateTimeFormat':{valueFormatter:function valueFormatter(params){return _this.dateFormatter(params.value,params.column.colDef.custom_format_string);}},'customNumericFormat':{valueFormatter:function valueFormatter(params){var _params$column$colDef;return _this.numberFormatter(params.value,(_params$column$colDef=params.column.colDef.precision)!==null&&_params$column$colDef!==void 0?_params$column$colDef:2);}},'customCurrencyFormat':{valueFormatter:function valueFormatter(params){return _this.currencyFormatter(params.value,params.column.colDef.custom_currency_symbol);}},'timedeltaFormat':{valueFormatter:function valueFormatter(params){return Object(moment[\"duration\"])(params.value).humanize(true);}}}};var gridOptions=Object.assign({},_this.columnFormaters,_this.props.args.gridOptions);if(_this.allowUnsafeJsCode){console.warn(\"flag allow_unsafe_jscode is on.\");gridOptions=_this.convertJavascriptCodeOnGridOptions(gridOptions);}_this.gridOptions=gridOptions;_this.state={rowData:JSON.parse(props.args.row_data),gridHeight:_this.props.args.height,should_update:false};return _this;}Object(createClass[\"a\" /* default */])(AgGrid,[{key:\"convertStringToFunction\",value:function convertStringToFunction(v){var JS_PLACEHOLDER=\"--x_x--0_0--\";var funcReg=new RegExp(\"\".concat(JS_PLACEHOLDER,\"\\\\s*(function\\\\s*.*)\\\\s*\").concat(JS_PLACEHOLDER));var match=funcReg.exec(v);if(match){var funcStr=match[1];// eslint-disable-next-line\nreturn new Function(\"return \"+funcStr)();}else{return v;}}},{key:\"setUpdateMode\",value:function setUpdateMode(){var _this3=this;if(this.manualUpdateRequested){return;//If manual update is set, no listeners will be added\n}var updateMode=this.props.args.update_mode;if((updateMode&2)===2){this.api.addEventListener('cellValueChanged',function(e){return _this3.returnGridValue(e);});}if((updateMode&4)===4){this.api.addEventListener('selectionChanged',function(e){return _this3.returnGridValue(e);});}if((updateMode&8)===8){this.api.addEventListener('filterChanged',function(e){return _this3.returnGridValue(e);});}if((updateMode&16)===16){this.api.addEventListener('sortChanged',function(e){return _this3.returnGridValue(e);});}}},{key:\"onGridReady\",value:function onGridReady(event){var _this4=this;this.api=event.api;this.columnApi=event.columnApi;this.setUpdateMode();this.api.addEventListener('firstDataRendered',function(e){return _this4.fitColumns();});this.api.setRowData(this.state.rowData);for(var idx in this.gridOptions['preSelectedRows']){this.api.selectIndex(this.gridOptions['preSelectedRows'][idx],true,true);}}},{key:\"fitColumns\",value:function fitColumns(){if(this.fitColumnsOnGridLoad){this.api.sizeColumnsToFit();}else{this.columnApi.autoSizeAllColumns();}}},{key:\"dateFormatter\",value:function dateFormatter(isoString,formaterString){try{var date=Object(parseISO[\"a\" /* default */])(isoString);return Object(format[\"a\" /* default */])(date,formaterString);}catch(_unused){return isoString;}finally{}}},{key:\"currencyFormatter\",value:function currencyFormatter(number,currencySymbol){var n=Number.parseFloat(number);if(!Number.isNaN(n)){return currencySymbol+n.toFixed(2);}else{return number;}}},{key:\"numberFormatter\",value:function numberFormatter(number,precision){var n=Number.parseFloat(number);if(!Number.isNaN(n)){return n.toFixed(precision);}else{return number;}}},{key:\"returnGridValue\",value:function returnGridValue(e){var returnData=[];var returnMode=this.props.args.data_return_mode;switch(returnMode){case 0://ALL_DATA\nthis.api.forEachLeafNode(function(row){return returnData.push(row.data);});break;case 1://FILTERED_DATA\nthis.api.forEachNodeAfterFilter(function(row){if(!row.group){returnData.push(row.data);}});break;case 2://FILTERED_SORTED_DATA\nthis.api.forEachNodeAfterFilterAndSort(function(row){if(!row.group){returnData.push(row.data);}});break;}var returnValue={originalDtypes:this.frameDtypes,rowData:returnData,selectedRows:this.api.getSelectedRows()};dist[\"a\" /* Streamlit */].setComponentValue(returnValue);}},{key:\"ManualUpdateButton\",value:function ManualUpdateButton(props){if(props.manual_update){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:props.onClick,children:\"Update\"});}else{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{});}}},{key:\"defineContainerHeight\",value:function defineContainerHeight(){if('domLayout'in this.gridOptions){if(this.gridOptions['domLayout']==='autoHeight'){return{width:this.props.width};}}return{width:this.props.width,height:this.state.gridHeight};}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.args.reload_data){// let old_row_data = state.rowData\nvar new_row_data=JSON.parse(props.args.row_data);//let should_update = _.isEqual(_.map(old_row_data, (v) => Object.keys(v)), _.map(new_row_data, (v) => Object.keys(v)))\nreturn{rowData:new_row_data,gridHeight:props.args.height,should_update:true};}else{return{gridHeight:props.args.height};}}}]);return AgGrid;}(dist[\"b\" /* StreamlitComponentBase */]);// \"withStreamlitConnection\" is a wrapper function. It bootstraps the\n// connection between your component and the Streamlit app, and handles\n// passing arguments from Python -> Component.\n//\n// You don't need to edit withStreamlitConnection (but you're welcome to!).\n/* harmony default export */ var src_AgGrid_0 = (Object(dist[\"c\" /* withStreamlitConnection */])(AgGrid_AgGrid));\n// CONCATENATED MODULE: ./src/index.tsx\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_AgGrid_0,{})}),document.getElementById(\"root\"));\n\n/***/ })\n\n},[[247,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:\\dev\\streamlit-aggrid\\st_aggrid\\frontend\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-6-0!C:\\dev\\streamlit-aggrid\\st_aggrid\\frontend\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-6-1!C:\\dev\\streamlit-aggrid\\st_aggrid\\frontend\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\dev\\streamlit-aggrid\\st_aggrid\\frontend\\node_modules\\resolve-url-loader\\index.js??ref--5-oneOf-6-3!C:\\dev\\streamlit-aggrid\\st_aggrid\\frontend\\node_modules\\sass-loader\\dist\\cjs.js??ref--5-oneOf-6-4!C:\\dev\\streamlit-aggrid\\st_aggrid\\frontend\\src\\AgGrid.scss","C:/dev/streamlit-aggrid/st_aggrid/frontend/src/utils.js","C:/dev/streamlit-aggrid/st_aggrid/frontend/src/AgGrid.tsx","C:/dev/streamlit-aggrid/st_aggrid/frontend/src/index.tsx"],"names":["mapObject","obj","fn","Object","keys","reduce","res","key","deepMap","deepMapper","val","Array","isArray","map","AgGrid","props","frameDtypes","api","columnApi","columnFormaters","manualUpdateRequested","allowUnsafeJsCode","fitColumnsOnGridLoad","gridOptions","convertJavascriptCodeOnGridOptions","convertStringToFunction","render","undefined","state","should_update","setRowData","rowData","args","theme","defineContainerHeight","e","returnGridValue","onGridReady","enable_enterprise_modules","ModuleRegistry","registerModules","AllModules","LicenseManager","setLicenseKey","AllCommunityModules","frame_dtypes","update_mode","allow_unsafe_jscode","fit_columns_on_grid_load","columnTypes","filter","filterParams","comparator","filterValue","cellValue","compareAsc","parseISO","valueFormatter","params","dateFormatter","value","column","colDef","custom_format_string","numberFormatter","precision","currencyFormatter","custom_currency_symbol","duration","humanize","assign","console","warn","JSON","parse","row_data","gridHeight","height","v","JS_PLACEHOLDER","funcReg","RegExp","match","exec","funcStr","Function","updateMode","addEventListener","event","setUpdateMode","fitColumns","idx","selectIndex","sizeColumnsToFit","autoSizeAllColumns","isoString","formaterString","date","format","number","currencySymbol","n","Number","parseFloat","isNaN","toFixed","returnData","returnMode","data_return_mode","forEachLeafNode","row","push","data","forEachNodeAfterFilter","group","forEachNodeAfterFilterAndSort","returnValue","originalDtypes","selectedRows","getSelectedRows","Streamlit","setComponentValue","manual_update","onClick","width","reload_data","new_row_data","StreamlitComponentBase","withStreamlitConnection","ReactDOM","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// stole from https://github.com/andfanilo/streamlit-echarts/blob/master/streamlit_echarts/frontend/src/utils.js Thanks andfanilo\r\nfunction mapObject(obj, fn) {\r\n    return Object.keys(obj).reduce((res, key) => {\r\n        res[key] = fn(obj[key])\r\n        return res\r\n    }, {})\r\n}\r\n\r\nfunction deepMap(obj, fn) {\r\n    const deepMapper = (val) =>\r\n        val !== null && typeof val === \"object\" ? deepMap(val, fn) : fn(val)\r\n    if (Array.isArray(obj)) {\r\n        return obj.map(deepMapper)\r\n    }\r\n    if (typeof obj === \"object\") {\r\n        return mapObject(obj, deepMapper)\r\n    }\r\n    return obj\r\n}\r\n\r\nexport default deepMap\r\n","import {\r\n  Streamlit,\r\n  StreamlitComponentBase,\r\n  withStreamlitConnection\r\n} from \"streamlit-component-lib\";\r\n\r\nimport React, { ReactNode } from \"react\"\r\n\r\nimport { AgGridReact } from '@ag-grid-community/react';\r\nimport { ColumnApi, GridApi } from '@ag-grid-community/core'\r\nimport { ModuleRegistry } from '@ag-grid-community/core';\r\nimport { AllCommunityModules } from '@ag-grid-community/all-modules'\r\nimport { AllModules } from '@ag-grid-enterprise/all-modules'\r\nimport { LicenseManager } from \"@ag-grid-enterprise/core\";\r\n\r\n// import '@ag-grid-community/core/dist/styles/ag-grid.css';\r\n// import '@ag-grid-community/core/dist/styles/ag-theme-balham.css';\r\n// import '@ag-grid-community/core/dist/styles/ag-theme-balham-dark.css';\r\n// import 'Agrid.scss'\r\n\r\nimport { parseISO, compareAsc } from 'date-fns'\r\nimport { format } from 'date-fns-tz'\r\nimport deepMap from \"./utils\"\r\nimport { duration } from \"moment\";\r\n\r\nimport '@ag-grid-community/core/dist/styles/ag-theme-blue.css';\r\nimport '@ag-grid-community/core/dist/styles/ag-theme-fresh.css';\r\nimport '@ag-grid-community/core/dist/styles/ag-theme-material.css';\r\n\r\n// import _ from 'lodash'\r\n\r\nimport'./AgGrid.scss'\r\n\r\ninterface State {\r\n  rowData: any\r\n  gridHeight: number\r\n  should_update: boolean\r\n}\r\n\r\nclass AgGrid extends StreamlitComponentBase<State> {\r\n  private frameDtypes: any\r\n  private api!: GridApi;\r\n  private columnApi!: ColumnApi\r\n  private columnFormaters: any\r\n  private manualUpdateRequested: boolean = false\r\n  private allowUnsafeJsCode: boolean = false\r\n  private fitColumnsOnGridLoad: boolean = false\r\n  private gridOptions: any\r\n\r\n  constructor(props: any) {\r\n    super(props)\r\n\r\n    if (props.args.enable_enterprise_modules) {\r\n      ModuleRegistry.registerModules(AllModules);\r\n      if ('license_key' in props.args) {\r\n        LicenseManager.setLicenseKey(props.args['license_key']);\r\n      }\r\n    } else {\r\n      ModuleRegistry.registerModules(AllCommunityModules);\r\n    }\r\n\r\n    this.frameDtypes = this.props.args.frame_dtypes\r\n    this.manualUpdateRequested = (this.props.args.update_mode === 1)\r\n    this.allowUnsafeJsCode = this.props.args.allow_unsafe_jscode\r\n    this.fitColumnsOnGridLoad = this.props.args.fit_columns_on_grid_load\r\n    \r\n    // let themes = {\r\n    //   'streamlit':'ag-theme-streamlit',\r\n    //   'light':'ag-theme-light',\r\n    //   'dark':'ag-theme-dark',\r\n    //   'blue':'ag-theme-blue',\r\n    //   'fresh':'ag-theme-fresh',\r\n    //   'material':'ag-theme-material',\r\n    // }\r\n\r\n    this.columnFormaters = {\r\n      columnTypes: {\r\n        'dateColumnFilter': {\r\n          filter: 'agDateColumnFilter',\r\n          filterParams: {\r\n            comparator: (filterValue: any, cellValue: string) => compareAsc(parseISO(cellValue), filterValue)\r\n          }\r\n        },\r\n        'numberColumnFilter': {\r\n          filter: 'agNumberColumnFilter'\r\n        },\r\n        'shortDateTimeFormat': {\r\n          valueFormatter: (params: any) => this.dateFormatter(params.value, \"dd/MM/yyyy HH:mm\"),\r\n        },\r\n        'customDateTimeFormat': {\r\n          valueFormatter: (params: any) => this.dateFormatter(params.value, params.column.colDef.custom_format_string),\r\n        },\r\n        'customNumericFormat': {\r\n          valueFormatter: (params: any) => this.numberFormatter(params.value, params.column.colDef.precision ?? 2),\r\n        },\r\n        'customCurrencyFormat': {\r\n          valueFormatter: (params: any) => this.currencyFormatter(params.value, params.column.colDef.custom_currency_symbol),\r\n        },\r\n        'timedeltaFormat': {\r\n          valueFormatter: (params: any) => duration(params.value).humanize(true)\r\n        },\r\n      }\r\n    }\r\n\r\n    let gridOptions = Object.assign({}, this.columnFormaters, this.props.args.gridOptions)\r\n\r\n    if (this.allowUnsafeJsCode) {\r\n      console.warn(\"flag allow_unsafe_jscode is on.\")\r\n      gridOptions = this.convertJavascriptCodeOnGridOptions(gridOptions)\r\n    }\r\n    this.gridOptions = gridOptions\r\n\r\n    this.state = {\r\n      rowData: JSON.parse(props.args.row_data),\r\n      gridHeight: this.props.args.height,\r\n      should_update: false\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromProps(props: any, state: any) {\r\n    if (props.args.reload_data) {\r\n      // let old_row_data = state.rowData\r\n      let new_row_data = JSON.parse(props.args.row_data)\r\n      //let should_update = _.isEqual(_.map(old_row_data, (v) => Object.keys(v)), _.map(new_row_data, (v) => Object.keys(v)))\r\n      return {\r\n        rowData: new_row_data,\r\n        gridHeight: props.args.height,\r\n        should_update: true\r\n      }\r\n    } else {\r\n      return {\r\n        gridHeight: props.args.height\r\n      }\r\n    }\r\n  }\r\n\r\n  private convertStringToFunction(v: string) {\r\n    const JS_PLACEHOLDER = \"--x_x--0_0--\"\r\n\r\n    let funcReg = new RegExp(\r\n      `${JS_PLACEHOLDER}\\\\s*(function\\\\s*.*)\\\\s*${JS_PLACEHOLDER}`\r\n    )\r\n\r\n    let match = funcReg.exec(v)\r\n\r\n    if (match) {\r\n      const funcStr = match[1]\r\n      // eslint-disable-next-line\r\n      return new Function(\"return \" + funcStr)()\r\n\r\n    } else {\r\n      return v\r\n    }\r\n  }\r\n\r\n  private convertJavascriptCodeOnGridOptions = (obj: object) => {\r\n    return deepMap(obj, this.convertStringToFunction)\r\n  }\r\n\r\n  private setUpdateMode() {\r\n    if (this.manualUpdateRequested) {\r\n      return //If manual update is set, no listeners will be added\r\n    }\r\n\r\n    let updateMode = this.props.args.update_mode\r\n\r\n    if ((updateMode & 2) === 2) {\r\n      this.api.addEventListener('cellValueChanged', (e: any) => this.returnGridValue(e))\r\n    }\r\n\r\n    if ((updateMode & 4) === 4) {\r\n      this.api.addEventListener('selectionChanged', (e: any) => this.returnGridValue(e))\r\n    }\r\n\r\n    if ((updateMode & 8) === 8) {\r\n      this.api.addEventListener('filterChanged', (e: any) => this.returnGridValue(e))\r\n    }\r\n\r\n    if ((updateMode & 16) === 16) {\r\n      this.api.addEventListener('sortChanged', (e: any) => this.returnGridValue(e))\r\n    }\r\n  }\r\n\r\n  private onGridReady(event: any) {\r\n    this.api = event.api\r\n    this.columnApi = event.columnApi\r\n\r\n    this.setUpdateMode()\r\n    this.api.addEventListener('firstDataRendered', (e: any) => this.fitColumns())\r\n\r\n    this.api.setRowData(this.state.rowData)\r\n\r\n    for (var idx in this.gridOptions['preSelectedRows']) {\r\n      this.api.selectIndex(this.gridOptions['preSelectedRows'][idx], true, true)\r\n    }\r\n  }\r\n\r\n  private fitColumns() {\r\n    if (this.fitColumnsOnGridLoad) {\r\n      this.api.sizeColumnsToFit()\r\n    }\r\n    else {\r\n      this.columnApi.autoSizeAllColumns()\r\n    }\r\n  }\r\n\r\n  private dateFormatter(isoString: string, formaterString: string): String {\r\n    try {\r\n      let date = parseISO(isoString)\r\n      return format(date, formaterString)\r\n    } catch {\r\n      return isoString\r\n    }\r\n    finally { }\r\n  }\r\n\r\n  private currencyFormatter(number: any, currencySymbol: string): String {\r\n    let n = Number.parseFloat(number)\r\n    if (!Number.isNaN(n)) {\r\n      return currencySymbol + n.toFixed(2)\r\n    } else {\r\n      return number\r\n    }\r\n  }\r\n\r\n  private numberFormatter(number: any, precision: number): String {\r\n    let n = Number.parseFloat(number)\r\n    if (!Number.isNaN(n)) {\r\n      return n.toFixed(precision)\r\n    } else {\r\n      return number\r\n    }\r\n  }\r\n\r\n  private returnGridValue(e: any) {\r\n    let returnData: any[] = []\r\n    let returnMode = this.props.args.data_return_mode\r\n\r\n    switch (returnMode) {\r\n      case 0: //ALL_DATA\r\n        this.api.forEachLeafNode((row) => returnData.push(row.data))\r\n        break;\r\n\r\n      case 1: //FILTERED_DATA\r\n        this.api.forEachNodeAfterFilter((row) => { if (!row.group) { returnData.push(row.data) } })\r\n        break;\r\n\r\n      case 2: //FILTERED_SORTED_DATA\r\n        this.api.forEachNodeAfterFilterAndSort((row) => { if (!row.group) { returnData.push(row.data) } })\r\n        break;\r\n    }\r\n\r\n    let returnValue = {\r\n      originalDtypes: this.frameDtypes,\r\n      rowData: returnData,\r\n      selectedRows: this.api.getSelectedRows()\r\n    }\r\n\r\n    Streamlit.setComponentValue(returnValue)\r\n  }\r\n\r\n  private ManualUpdateButton(props: any) {\r\n    if (props.manual_update) {\r\n      return (<button onClick={props.onClick}>Update</button>)\r\n    }\r\n    else {\r\n      return (<span></span>)\r\n    }\r\n  }\r\n\r\n  private defineContainerHeight() {\r\n    if ('domLayout' in this.gridOptions) {\r\n      if (this.gridOptions['domLayout'] === 'autoHeight') {\r\n        return ({\r\n          width: this.props.width\r\n        })\r\n      }\r\n    }\r\n    return ({\r\n      width: this.props.width,\r\n      height: this.state.gridHeight\r\n    })\r\n  }\r\n\r\n  public render = (): ReactNode => {\r\n\r\n    if (this.api !== undefined) {\r\n      if (this.state.should_update) {\r\n        this.api.setRowData(this.state.rowData)\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className={\"ag-theme-\"+ this.props.args.theme} style={this.defineContainerHeight()} >\r\n        <this.ManualUpdateButton manual_update={this.manualUpdateRequested} onClick={(e: any) => this.returnGridValue(e)} />\r\n        <AgGridReact\r\n          onGridReady={(e) => this.onGridReady(e)}\r\n          gridOptions={this.gridOptions}\r\n        >\r\n        </AgGridReact>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n\r\n// \"withStreamlitConnection\" is a wrapper function. It bootstraps the\r\n// connection between your component and the Streamlit app, and handles\r\n// passing arguments from Python -> Component.\r\n//\r\n// You don't need to edit withStreamlitConnection (but you're welcome to!).\r\nexport default withStreamlitConnection(AgGrid)\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport AgGrid from \"./AgGrid\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <AgGrid />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)\r\n"]}}