{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { _, Autowired, Bean, BeanStub, PreConstruct } from '@ag-grid-community/core';\n\nvar LicenseManager = function (_super) {\n  __extends(LicenseManager, _super);\n\n  function LicenseManager() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.watermarkMessage = undefined;\n    return _this;\n  }\n\n  LicenseManager_1 = LicenseManager;\n\n  LicenseManager.prototype.validateLicense = function () {\n    if (_.missingOrEmpty(LicenseManager_1.licenseKey)) {\n      this.outputMissingLicenseKey();\n    } else if (LicenseManager_1.licenseKey.length > 32) {\n      var _a = LicenseManager_1.extractLicenseComponents(LicenseManager_1.licenseKey),\n          md5 = _a.md5,\n          license = _a.license,\n          version = _a.version,\n          isTrial = _a.isTrial;\n\n      if (md5 === this.md5.md5(license)) {\n        if (_.exists(version) && version) {\n          this.validateLicenseKeyForVersion(version, !!isTrial, license);\n        } else {\n          this.validateLegacyKey(license);\n        }\n      } else {\n        this.outputInvalidLicenseKey();\n      }\n    } else {\n      this.outputInvalidLicenseKey();\n    }\n  };\n\n  LicenseManager.extractExpiry = function (license) {\n    var restrictionHashed = license.substring(license.lastIndexOf('_') + 1, license.length);\n    return new Date(parseInt(LicenseManager_1.decode(restrictionHashed), 10));\n  };\n\n  LicenseManager.extractLicenseComponents = function (licenseKey) {\n    // when users copy the license key from a PDF extra zero width characters are sometimes copied too\n    // carriage returns and line feeds are problematic too\n    // all of which causes license key validation to fail - strip these out\n    var cleanedLicenseKey = licenseKey.replace(/[\\u200B-\\u200D\\uFEFF]/g, '');\n    cleanedLicenseKey = cleanedLicenseKey.replace(/\\r?\\n|\\r/g, '');\n    var hashStart = cleanedLicenseKey.length - 32;\n    var md5 = cleanedLicenseKey.substring(hashStart);\n    var license = cleanedLicenseKey.substring(0, hashStart);\n\n    var _a = LicenseManager_1.extractBracketedInformation(cleanedLicenseKey),\n        version = _a[0],\n        isTrial = _a[1];\n\n    return {\n      md5: md5,\n      license: license,\n      version: version,\n      isTrial: isTrial\n    };\n  };\n\n  LicenseManager.prototype.getLicenseDetails = function (licenseKey) {\n    var _a = LicenseManager_1.extractLicenseComponents(licenseKey),\n        md5 = _a.md5,\n        license = _a.license,\n        version = _a.version,\n        isTrial = _a.isTrial;\n\n    var valid = md5 === this.md5.md5(license);\n    var expiry = null;\n\n    if (valid) {\n      expiry = LicenseManager_1.extractExpiry(license);\n      valid = !isNaN(expiry.getTime());\n    }\n\n    return {\n      licenseKey: licenseKey,\n      valid: valid,\n      expiry: valid ? LicenseManager_1.formatDate(expiry) : null,\n      version: version ? version : 'legacy',\n      isTrial: isTrial\n    };\n  };\n\n  LicenseManager.prototype.isDisplayWatermark = function () {\n    return !_.missingOrEmpty(this.watermarkMessage);\n  };\n\n  LicenseManager.prototype.getWatermarkMessage = function () {\n    return this.watermarkMessage || '';\n  };\n\n  LicenseManager.formatDate = function (date) {\n    var monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    var day = date.getDate();\n    var monthIndex = date.getMonth();\n    var year = date.getFullYear();\n    return day + ' ' + monthNames[monthIndex] + ' ' + year;\n  };\n\n  LicenseManager.getGridReleaseDate = function () {\n    return new Date(parseInt(LicenseManager_1.decode(LicenseManager_1.RELEASE_INFORMATION), 10));\n  };\n\n  LicenseManager.decode = function (input) {\n    var keystr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var t = '';\n    var n, r, i;\n    var s, o, u, a;\n    var f = 0;\n    var e = input.replace(/[^A-Za-z0-9+/=]/g, '');\n\n    while (f < e.length) {\n      s = keystr.indexOf(e.charAt(f++));\n      o = keystr.indexOf(e.charAt(f++));\n      u = keystr.indexOf(e.charAt(f++));\n      a = keystr.indexOf(e.charAt(f++));\n      n = s << 2 | o >> 4;\n      r = (o & 15) << 4 | u >> 2;\n      i = (u & 3) << 6 | a;\n      t = t + String.fromCharCode(n);\n\n      if (u != 64) {\n        t = t + String.fromCharCode(r);\n      }\n\n      if (a != 64) {\n        t = t + String.fromCharCode(i);\n      }\n    }\n\n    t = LicenseManager_1.utf8_decode(t);\n    return t;\n  };\n\n  LicenseManager.utf8_decode = function (input) {\n    input = input.replace(/rn/g, 'n');\n    var t = '';\n\n    for (var n = 0; n < input.length; n++) {\n      var r = input.charCodeAt(n);\n\n      if (r < 128) {\n        t += String.fromCharCode(r);\n      } else if (r > 127 && r < 2048) {\n        t += String.fromCharCode(r >> 6 | 192);\n        t += String.fromCharCode(r & 63 | 128);\n      } else {\n        t += String.fromCharCode(r >> 12 | 224);\n        t += String.fromCharCode(r >> 6 & 63 | 128);\n        t += String.fromCharCode(r & 63 | 128);\n      }\n    }\n\n    return t;\n  };\n\n  LicenseManager.setLicenseKey = function (licenseKey) {\n    LicenseManager_1.licenseKey = licenseKey;\n  };\n\n  LicenseManager.extractBracketedInformation = function (licenseKey) {\n    var matches = licenseKey.split('[').filter(function (v) {\n      return v.indexOf(']') > -1;\n    }).map(function (value) {\n      return value.split(']')[0];\n    });\n\n    if (!matches || matches.length === 0) {\n      return [null, null];\n    }\n\n    var isTrial = matches.filter(function (match) {\n      return match === 'TRIAL';\n    }).length === 1;\n    var version = matches.filter(function (match) {\n      return match.indexOf(\"v\") === 0;\n    }).map(function (match) {\n      return match.replace(/^v/, \"\");\n    })[0];\n    return [version, isTrial];\n  };\n\n  LicenseManager.prototype.validateLicenseKeyForVersion = function (version, isTrial, license) {\n    if (version !== '2') {\n      return;\n    }\n\n    if (isTrial) {\n      this.validateForTrial(license);\n    } else {\n      this.validateLegacyKey(license);\n    }\n  };\n\n  LicenseManager.prototype.validateLegacyKey = function (license) {\n    var gridReleaseDate = LicenseManager_1.getGridReleaseDate();\n    var expiry = LicenseManager_1.extractExpiry(license);\n    var valid = false;\n    var current = false;\n\n    if (!isNaN(expiry.getTime())) {\n      valid = true;\n      current = gridReleaseDate < expiry;\n    }\n\n    if (!valid) {\n      this.outputInvalidLicenseKey();\n    } else if (!current) {\n      var formattedExpiryDate = LicenseManager_1.formatDate(expiry);\n      var formattedReleaseDate = LicenseManager_1.formatDate(gridReleaseDate);\n      this.outputIncompatibleVersion(formattedExpiryDate, formattedReleaseDate);\n    }\n  };\n\n  LicenseManager.prototype.validateForTrial = function (license) {\n    var expiry = LicenseManager_1.extractExpiry(license);\n    var now = new Date();\n    var valid = false;\n    var current = false;\n\n    if (!isNaN(expiry.getTime())) {\n      valid = true;\n      current = expiry > now;\n    }\n\n    if (!valid) {\n      this.outputInvalidLicenseKey();\n    } else if (!current) {\n      var formattedExpiryDate = LicenseManager_1.formatDate(expiry);\n      this.outputExpiredTrialKey(formattedExpiryDate);\n    }\n  };\n\n  LicenseManager.prototype.outputInvalidLicenseKey = function () {\n    console.error('*****************************************************************************************************************');\n    console.error('***************************************** AG Grid Enterprise License ********************************************');\n    console.error('********************************************* Invalid License ***************************************************');\n    console.error('* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *');\n    console.error('*****************************************************************************************************************');\n    console.error('*****************************************************************************************************************');\n    this.watermarkMessage = \"Invalid License\";\n  };\n\n  LicenseManager.prototype.outputExpiredTrialKey = function (formattedExpiryDate) {\n    console.error('****************************************************************************************************************');\n    console.error('***************************************** AG Grid Enterprise License *******************************************');\n    console.error('*****************************************   Trial Period Expired.    *******************************************');\n    console.error(\"* Your license for AG Grid Enterprise expired on \" + formattedExpiryDate + \".                                                *\");\n    console.error('* Please email info@ag-grid.com to purchase a license.                                                         *');\n    console.error('****************************************************************************************************************');\n    console.error('****************************************************************************************************************');\n    this.watermarkMessage = \"Trial Period Expired\";\n  };\n\n  LicenseManager.prototype.outputMissingLicenseKey = function () {\n    console.error('****************************************************************************************************************');\n    console.error('***************************************** AG Grid Enterprise License *******************************************');\n    console.error('****************************************** License Key Not Found ***********************************************');\n    console.error('* All AG Grid Enterprise features are unlocked.                                                                *');\n    console.error('* This is an evaluation only version, it is not licensed for development projects intended for production.     *');\n    console.error('* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *');\n    console.error('****************************************************************************************************************');\n    console.error('****************************************************************************************************************');\n    this.watermarkMessage = \"For Trial Use Only\";\n  };\n\n  LicenseManager.prototype.outputIncompatibleVersion = function (formattedExpiryDate, formattedReleaseDate) {\n    console.error('****************************************************************************************************************************');\n    console.error('****************************************************************************************************************************');\n    console.error('*                                             AG Grid Enterprise License                                                   *');\n    console.error('*                           License not compatible with installed version of AG Grid Enterprise.                           *');\n    console.error('*                                                                                                                          *');\n    console.error(\"* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *\");\n    console.error(\"* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *\");\n    console.error(\"* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *\");\n    console.error(\"* license end date. The license key that you have expires on \" + formattedExpiryDate + \", however the version of AG Grid you    *\");\n    console.error(\"* are trying to use was released on \" + formattedReleaseDate + \".                                                               *\");\n    console.error('*                                                                                                                          *');\n    console.error('* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *');\n    console.error('* version of AG Grid.                                                                                                      *');\n    console.error('****************************************************************************************************************************');\n    console.error('****************************************************************************************************************************');\n    this.watermarkMessage = \"License Expired\";\n  };\n\n  var LicenseManager_1;\n  LicenseManager.RELEASE_INFORMATION = 'MTYyODc2NTk1NDkwMA==';\n\n  __decorate([Autowired('md5')], LicenseManager.prototype, \"md5\", void 0);\n\n  __decorate([PreConstruct], LicenseManager.prototype, \"validateLicense\", null);\n\n  LicenseManager = LicenseManager_1 = __decorate([Bean('licenseManager')], LicenseManager);\n  return LicenseManager;\n}(BeanStub);\n\nexport { LicenseManager };","map":{"version":3,"sources":["C:/dev/streamlit-aggrid/st_aggrid/frontend/node_modules/@ag-grid-enterprise/core/dist/es6/licenseManager.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","_","Autowired","Bean","BeanStub","PreConstruct","LicenseManager","_super","_this","apply","watermarkMessage","undefined","LicenseManager_1","validateLicense","missingOrEmpty","licenseKey","outputMissingLicenseKey","_a","extractLicenseComponents","md5","license","version","isTrial","exists","validateLicenseKeyForVersion","validateLegacyKey","outputInvalidLicenseKey","extractExpiry","restrictionHashed","substring","lastIndexOf","Date","parseInt","decode","cleanedLicenseKey","replace","hashStart","extractBracketedInformation","getLicenseDetails","valid","expiry","isNaN","getTime","formatDate","isDisplayWatermark","getWatermarkMessage","date","monthNames","day","getDate","monthIndex","getMonth","year","getFullYear","getGridReleaseDate","RELEASE_INFORMATION","input","keystr","t","n","s","o","u","a","f","e","indexOf","charAt","String","fromCharCode","utf8_decode","charCodeAt","setLicenseKey","matches","split","filter","v","map","value","match","validateForTrial","gridReleaseDate","current","formattedExpiryDate","formattedReleaseDate","outputIncompatibleVersion","now","outputExpiredTrialKey","console","error"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { _, Autowired, Bean, BeanStub, PreConstruct } from '@ag-grid-community/core';\nvar LicenseManager = /** @class */ (function (_super) {\n    __extends(LicenseManager, _super);\n    function LicenseManager() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.watermarkMessage = undefined;\n        return _this;\n    }\n    LicenseManager_1 = LicenseManager;\n    LicenseManager.prototype.validateLicense = function () {\n        if (_.missingOrEmpty(LicenseManager_1.licenseKey)) {\n            this.outputMissingLicenseKey();\n        }\n        else if (LicenseManager_1.licenseKey.length > 32) {\n            var _a = LicenseManager_1.extractLicenseComponents(LicenseManager_1.licenseKey), md5 = _a.md5, license = _a.license, version = _a.version, isTrial = _a.isTrial;\n            if (md5 === this.md5.md5(license)) {\n                if (_.exists(version) && version) {\n                    this.validateLicenseKeyForVersion(version, !!isTrial, license);\n                }\n                else {\n                    this.validateLegacyKey(license);\n                }\n            }\n            else {\n                this.outputInvalidLicenseKey();\n            }\n        }\n        else {\n            this.outputInvalidLicenseKey();\n        }\n    };\n    LicenseManager.extractExpiry = function (license) {\n        var restrictionHashed = license.substring(license.lastIndexOf('_') + 1, license.length);\n        return new Date(parseInt(LicenseManager_1.decode(restrictionHashed), 10));\n    };\n    LicenseManager.extractLicenseComponents = function (licenseKey) {\n        // when users copy the license key from a PDF extra zero width characters are sometimes copied too\n        // carriage returns and line feeds are problematic too\n        // all of which causes license key validation to fail - strip these out\n        var cleanedLicenseKey = licenseKey.replace(/[\\u200B-\\u200D\\uFEFF]/g, '');\n        cleanedLicenseKey = cleanedLicenseKey.replace(/\\r?\\n|\\r/g, '');\n        var hashStart = cleanedLicenseKey.length - 32;\n        var md5 = cleanedLicenseKey.substring(hashStart);\n        var license = cleanedLicenseKey.substring(0, hashStart);\n        var _a = LicenseManager_1.extractBracketedInformation(cleanedLicenseKey), version = _a[0], isTrial = _a[1];\n        return { md5: md5, license: license, version: version, isTrial: isTrial };\n    };\n    LicenseManager.prototype.getLicenseDetails = function (licenseKey) {\n        var _a = LicenseManager_1.extractLicenseComponents(licenseKey), md5 = _a.md5, license = _a.license, version = _a.version, isTrial = _a.isTrial;\n        var valid = (md5 === this.md5.md5(license));\n        var expiry = null;\n        if (valid) {\n            expiry = LicenseManager_1.extractExpiry(license);\n            valid = !isNaN(expiry.getTime());\n        }\n        return {\n            licenseKey: licenseKey,\n            valid: valid,\n            expiry: valid ? LicenseManager_1.formatDate(expiry) : null,\n            version: version ? version : 'legacy',\n            isTrial: isTrial\n        };\n    };\n    LicenseManager.prototype.isDisplayWatermark = function () {\n        return !_.missingOrEmpty(this.watermarkMessage);\n    };\n    LicenseManager.prototype.getWatermarkMessage = function () {\n        return this.watermarkMessage || '';\n    };\n    LicenseManager.formatDate = function (date) {\n        var monthNames = [\n            'January', 'February', 'March',\n            'April', 'May', 'June', 'July',\n            'August', 'September', 'October',\n            'November', 'December'\n        ];\n        var day = date.getDate();\n        var monthIndex = date.getMonth();\n        var year = date.getFullYear();\n        return day + ' ' + monthNames[monthIndex] + ' ' + year;\n    };\n    LicenseManager.getGridReleaseDate = function () {\n        return new Date(parseInt(LicenseManager_1.decode(LicenseManager_1.RELEASE_INFORMATION), 10));\n    };\n    LicenseManager.decode = function (input) {\n        var keystr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n        var t = '';\n        var n, r, i;\n        var s, o, u, a;\n        var f = 0;\n        var e = input.replace(/[^A-Za-z0-9+/=]/g, '');\n        while (f < e.length) {\n            s = keystr.indexOf(e.charAt(f++));\n            o = keystr.indexOf(e.charAt(f++));\n            u = keystr.indexOf(e.charAt(f++));\n            a = keystr.indexOf(e.charAt(f++));\n            n = s << 2 | o >> 4;\n            r = (o & 15) << 4 | u >> 2;\n            i = (u & 3) << 6 | a;\n            t = t + String.fromCharCode(n);\n            if (u != 64) {\n                t = t + String.fromCharCode(r);\n            }\n            if (a != 64) {\n                t = t + String.fromCharCode(i);\n            }\n        }\n        t = LicenseManager_1.utf8_decode(t);\n        return t;\n    };\n    LicenseManager.utf8_decode = function (input) {\n        input = input.replace(/rn/g, 'n');\n        var t = '';\n        for (var n = 0; n < input.length; n++) {\n            var r = input.charCodeAt(n);\n            if (r < 128) {\n                t += String.fromCharCode(r);\n            }\n            else if (r > 127 && r < 2048) {\n                t += String.fromCharCode(r >> 6 | 192);\n                t += String.fromCharCode(r & 63 | 128);\n            }\n            else {\n                t += String.fromCharCode(r >> 12 | 224);\n                t += String.fromCharCode(r >> 6 & 63 | 128);\n                t += String.fromCharCode(r & 63 | 128);\n            }\n        }\n        return t;\n    };\n    LicenseManager.setLicenseKey = function (licenseKey) {\n        LicenseManager_1.licenseKey = licenseKey;\n    };\n    LicenseManager.extractBracketedInformation = function (licenseKey) {\n        var matches = licenseKey.split('[')\n            .filter(function (v) {\n            return v.indexOf(']') > -1;\n        })\n            .map(function (value) {\n            return value.split(']')[0];\n        });\n        if (!matches || matches.length === 0) {\n            return [null, null];\n        }\n        var isTrial = matches.filter(function (match) { return match === 'TRIAL'; }).length === 1;\n        var version = matches.filter(function (match) { return match.indexOf(\"v\") === 0; }).map(function (match) { return match.replace(/^v/, \"\"); })[0];\n        return [version, isTrial];\n    };\n    LicenseManager.prototype.validateLicenseKeyForVersion = function (version, isTrial, license) {\n        if (version !== '2') {\n            return;\n        }\n        if (isTrial) {\n            this.validateForTrial(license);\n        }\n        else {\n            this.validateLegacyKey(license);\n        }\n    };\n    LicenseManager.prototype.validateLegacyKey = function (license) {\n        var gridReleaseDate = LicenseManager_1.getGridReleaseDate();\n        var expiry = LicenseManager_1.extractExpiry(license);\n        var valid = false;\n        var current = false;\n        if (!isNaN(expiry.getTime())) {\n            valid = true;\n            current = (gridReleaseDate < expiry);\n        }\n        if (!valid) {\n            this.outputInvalidLicenseKey();\n        }\n        else if (!current) {\n            var formattedExpiryDate = LicenseManager_1.formatDate(expiry);\n            var formattedReleaseDate = LicenseManager_1.formatDate(gridReleaseDate);\n            this.outputIncompatibleVersion(formattedExpiryDate, formattedReleaseDate);\n        }\n    };\n    LicenseManager.prototype.validateForTrial = function (license) {\n        var expiry = LicenseManager_1.extractExpiry(license);\n        var now = new Date();\n        var valid = false;\n        var current = false;\n        if (!isNaN(expiry.getTime())) {\n            valid = true;\n            current = (expiry > now);\n        }\n        if (!valid) {\n            this.outputInvalidLicenseKey();\n        }\n        else if (!current) {\n            var formattedExpiryDate = LicenseManager_1.formatDate(expiry);\n            this.outputExpiredTrialKey(formattedExpiryDate);\n        }\n    };\n    LicenseManager.prototype.outputInvalidLicenseKey = function () {\n        console.error('*****************************************************************************************************************');\n        console.error('***************************************** AG Grid Enterprise License ********************************************');\n        console.error('********************************************* Invalid License ***************************************************');\n        console.error('* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *');\n        console.error('*****************************************************************************************************************');\n        console.error('*****************************************************************************************************************');\n        this.watermarkMessage = \"Invalid License\";\n    };\n    LicenseManager.prototype.outputExpiredTrialKey = function (formattedExpiryDate) {\n        console.error('****************************************************************************************************************');\n        console.error('***************************************** AG Grid Enterprise License *******************************************');\n        console.error('*****************************************   Trial Period Expired.    *******************************************');\n        console.error(\"* Your license for AG Grid Enterprise expired on \" + formattedExpiryDate + \".                                                *\");\n        console.error('* Please email info@ag-grid.com to purchase a license.                                                         *');\n        console.error('****************************************************************************************************************');\n        console.error('****************************************************************************************************************');\n        this.watermarkMessage = \"Trial Period Expired\";\n    };\n    LicenseManager.prototype.outputMissingLicenseKey = function () {\n        console.error('****************************************************************************************************************');\n        console.error('***************************************** AG Grid Enterprise License *******************************************');\n        console.error('****************************************** License Key Not Found ***********************************************');\n        console.error('* All AG Grid Enterprise features are unlocked.                                                                *');\n        console.error('* This is an evaluation only version, it is not licensed for development projects intended for production.     *');\n        console.error('* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *');\n        console.error('****************************************************************************************************************');\n        console.error('****************************************************************************************************************');\n        this.watermarkMessage = \"For Trial Use Only\";\n    };\n    LicenseManager.prototype.outputIncompatibleVersion = function (formattedExpiryDate, formattedReleaseDate) {\n        console.error('****************************************************************************************************************************');\n        console.error('****************************************************************************************************************************');\n        console.error('*                                             AG Grid Enterprise License                                                   *');\n        console.error('*                           License not compatible with installed version of AG Grid Enterprise.                           *');\n        console.error('*                                                                                                                          *');\n        console.error(\"* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *\");\n        console.error(\"* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *\");\n        console.error(\"* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *\");\n        console.error(\"* license end date. The license key that you have expires on \" + formattedExpiryDate + \", however the version of AG Grid you    *\");\n        console.error(\"* are trying to use was released on \" + formattedReleaseDate + \".                                                               *\");\n        console.error('*                                                                                                                          *');\n        console.error('* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *');\n        console.error('* version of AG Grid.                                                                                                      *');\n        console.error('****************************************************************************************************************************');\n        console.error('****************************************************************************************************************************');\n        this.watermarkMessage = \"License Expired\";\n    };\n    var LicenseManager_1;\n    LicenseManager.RELEASE_INFORMATION = 'MTYyODc2NTk1NDkwMA==';\n    __decorate([\n        Autowired('md5')\n    ], LicenseManager.prototype, \"md5\", void 0);\n    __decorate([\n        PreConstruct\n    ], LicenseManager.prototype, \"validateLicense\", null);\n    LicenseManager = LicenseManager_1 = __decorate([\n        Bean('licenseManager')\n    ], LicenseManager);\n    return LicenseManager;\n}(BeanStub));\nexport { LicenseManager };\n"]},"metadata":{},"sourceType":"module"}