{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { _, ChartType } from \"@ag-grid-community/core\";\nimport { AgChart } from \"ag-charts-community\";\nimport { ChartDataModel } from \"../../chartDataModel\";\nimport { CartesianChartProxy } from \"./cartesianChartProxy\";\n\nvar ScatterChartProxy = function (_super) {\n  __extends(ScatterChartProxy, _super);\n\n  function ScatterChartProxy(params) {\n    var _this = _super.call(this, params) || this;\n\n    _this.getMarkersEnabled = function () {\n      return true;\n    }; // markers are always enabled on scatter charts\n\n\n    _this.initChartOptions();\n\n    _this.recreateChart();\n\n    return _this;\n  }\n\n  ScatterChartProxy.prototype.createChart = function () {\n    var options = this.iChartOptions;\n    var agChartOptions = options;\n    agChartOptions.autoSize = true;\n    agChartOptions.axes = [__assign({\n      type: 'number',\n      position: 'bottom'\n    }, options.xAxis), __assign({\n      type: 'number',\n      position: 'left'\n    }, options.yAxis)];\n    return AgChart.create(agChartOptions, this.chartProxyParams.parentElement);\n  };\n\n  ScatterChartProxy.prototype.update = function (params) {\n    var _this = this;\n\n    if (params.fields.length < 2) {\n      this.chart.removeAllSeries();\n      return;\n    }\n\n    var fields = params.fields;\n\n    if (this.crossFiltering) {\n      // add additional filtered out field\n      fields.forEach(function (field) {\n        var crossFilteringField = __assign({}, field);\n\n        crossFilteringField.colId = field.colId + '-filtered-out';\n        fields.push(crossFilteringField);\n      });\n    }\n\n    var seriesDefaults = this.iChartOptions.seriesDefaults;\n    var seriesDefinitions = this.getSeriesDefinitions(fields, seriesDefaults.paired);\n    var dataDomain;\n\n    if (this.crossFiltering) {\n      dataDomain = this.getCrossFilteringDataDomain(seriesDefinitions, params);\n    }\n\n    var chart = this.chart;\n    var existingSeriesById = chart.series.reduceRight(function (map, series, i) {\n      var matchingIndex = _.findIndex(seriesDefinitions, function (s) {\n        return s.xField.colId === series.xKey && s.yField.colId === series.yKey && (!s.sizeField && !series.sizeKey || s.sizeField && s.sizeField.colId === series.sizeKey);\n      });\n\n      if (matchingIndex === i) {\n        map.set(series.yKey, series);\n      } else {\n        chart.removeSeries(series);\n      }\n\n      return map;\n    }, new Map());\n\n    var _a = this.getPalette(),\n        fills = _a.fills,\n        strokes = _a.strokes;\n\n    if (this.crossFiltering) {\n      // introduce cross filtering transparent fills\n      var fillsMod_1 = [];\n      fills.forEach(function (fill) {\n        fillsMod_1.push(fill);\n        fillsMod_1.push(_this.hexToRGBA(fill, '0.3'));\n      });\n      fills = fillsMod_1; // introduce cross filtering transparent strokes\n\n      var strokesMod_1 = [];\n      strokes.forEach(function (stroke) {\n        strokesMod_1.push(stroke);\n        strokesMod_1.push(_this.hexToRGBA(stroke, '0.3'));\n      });\n      strokes = strokesMod_1;\n    }\n\n    var labelFieldDefinition = params.category.id === ChartDataModel.DEFAULT_CATEGORY ? undefined : params.category;\n    var previousSeries;\n    seriesDefinitions.forEach(function (seriesDefinition, index) {\n      var existingSeries = existingSeriesById.get(seriesDefinition.yField.colId);\n\n      var marker = __assign({}, seriesDefaults.marker);\n\n      if (marker.type) {\n        // deprecated\n        marker.shape = marker.type;\n        delete marker.type;\n      }\n\n      var series = existingSeries || AgChart.createComponent(__assign(__assign({}, seriesDefaults), {\n        type: 'scatter',\n        fillOpacity: seriesDefaults.fill.opacity,\n        strokeOpacity: seriesDefaults.stroke.opacity,\n        strokeWidth: seriesDefaults.stroke.width,\n        marker: marker,\n        tooltip: {\n          enabled: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled,\n          renderer: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled && seriesDefaults.tooltip.renderer\n        }\n      }), 'scatter.series');\n\n      if (!series) {\n        return;\n      }\n\n      var _a = seriesDefinition,\n          xFieldDefinition = _a.xField,\n          yFieldDefinition = _a.yField,\n          sizeFieldDefinition = _a.sizeField;\n      series.title = yFieldDefinition.displayName + \" vs \" + xFieldDefinition.displayName;\n      series.xKey = xFieldDefinition.colId;\n      series.xName = xFieldDefinition.displayName;\n      series.yKey = yFieldDefinition.colId;\n      series.yName = yFieldDefinition.displayName;\n      series.data = params.data;\n      series.fill = fills[index % fills.length];\n      series.stroke = strokes[index % strokes.length];\n\n      if (sizeFieldDefinition) {\n        series.sizeKey = sizeFieldDefinition.colId;\n        series.sizeName = sizeFieldDefinition.displayName;\n      } else {\n        series.sizeKey = undefined;\n      }\n\n      if (labelFieldDefinition) {\n        series.labelKey = labelFieldDefinition.id;\n        series.labelName = labelFieldDefinition.name;\n      } else {\n        series.labelKey = series.yKey;\n      }\n\n      var isFilteredOutYKey = yFieldDefinition.colId.indexOf('-filtered-out') > -1;\n\n      if (_this.crossFiltering) {\n        if (!isFilteredOutYKey) {\n          // sync toggling of legend item with hidden 'filtered out' item\n          chart.legend.addEventListener('click', function (event) {\n            series.toggleSeriesItem(event.itemId + '-filtered-out', event.enabled);\n          });\n        }\n\n        if (dataDomain) {\n          series.marker.domain = dataDomain;\n        }\n\n        chart.tooltip.delay = 500; // hide 'filtered out' legend items\n\n        if (isFilteredOutYKey) {\n          series.showInLegend = false;\n        } // add node click cross filtering callback to series\n\n\n        series.addEventListener('nodeClick', _this.crossFilterCallback);\n      }\n\n      if (!existingSeries) {\n        chart.addSeriesAfter(series, previousSeries);\n      }\n\n      previousSeries = series;\n    });\n  };\n\n  ScatterChartProxy.prototype.extractIChartOptionsFromTheme = function (theme) {\n    var options = _super.prototype.extractIChartOptionsFromTheme.call(this, theme);\n\n    var seriesDefaults = theme.getConfig('scatter.series.scatter');\n    options.seriesDefaults = {\n      tooltip: {\n        enabled: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled,\n        renderer: seriesDefaults.tooltip && seriesDefaults.tooltip.renderer\n      },\n      fill: {\n        colors: seriesDefaults.fill && [seriesDefaults.fill] || theme.palette.fills,\n        opacity: seriesDefaults.fillOpacity\n      },\n      stroke: {\n        colors: seriesDefaults.stroke && [seriesDefaults.stroke] || theme.palette.strokes,\n        opacity: seriesDefaults.strokeOpacity,\n        width: seriesDefaults.strokeWidth\n      },\n      label: seriesDefaults.label,\n      marker: {\n        enabled: seriesDefaults.marker.enabled,\n        shape: seriesDefaults.marker.shape,\n        size: seriesDefaults.marker.size,\n        strokeWidth: seriesDefaults.marker.strokeWidth\n      },\n      highlightStyle: seriesDefaults.highlightStyle,\n      listeners: seriesDefaults.listeners,\n      paired: true\n    };\n    return options;\n  };\n\n  ScatterChartProxy.prototype.getTooltipsEnabled = function () {\n    return this.iChartOptions.seriesDefaults.tooltip != null && !!this.iChartOptions.seriesDefaults.tooltip.enabled;\n  };\n\n  ScatterChartProxy.prototype.getDefaultOptions = function () {\n    var isBubble = this.chartType === ChartType.Bubble;\n    var options = this.getDefaultCartesianChartOptions();\n    options.seriesDefaults = __assign(__assign({}, options.seriesDefaults), {\n      fill: __assign(__assign({}, options.seriesDefaults.fill), {\n        opacity: isBubble ? 0.7 : 1\n      }),\n      stroke: __assign(__assign({}, options.seriesDefaults.stroke), {\n        width: 3\n      }),\n      marker: {\n        shape: 'circle',\n        enabled: true,\n        size: 6,\n        maxSize: 30,\n        strokeWidth: 1\n      },\n      tooltip: {\n        enabled: true\n      },\n      paired: true\n    });\n    return options;\n  };\n\n  ScatterChartProxy.prototype.getSeriesDefinitions = function (fields, paired) {\n    if (fields.length < 2) {\n      return [];\n    }\n\n    var isBubbleChart = this.chartType === ChartType.Bubble;\n\n    if (paired) {\n      if (isBubbleChart) {\n        return fields.map(function (currentxField, i) {\n          return i % 3 === 0 ? {\n            xField: currentxField,\n            yField: fields[i + 1],\n            sizeField: fields[i + 2]\n          } : null;\n        }).filter(function (x) {\n          return x && x.yField && x.sizeField;\n        });\n      }\n\n      return fields.map(function (currentxField, i) {\n        return i % 2 === 0 ? {\n          xField: currentxField,\n          yField: fields[i + 1]\n        } : null;\n      }).filter(function (x) {\n        return x && x.yField;\n      });\n    }\n\n    var xField = fields[0];\n\n    if (isBubbleChart) {\n      return fields.map(function (yField, i) {\n        return i % 2 === 1 ? {\n          xField: xField,\n          yField: yField,\n          sizeField: fields[i + 1]\n        } : null;\n      }).filter(function (x) {\n        return x && x.sizeField;\n      });\n    }\n\n    return fields.filter(function (value, i) {\n      return i > 0;\n    }).map(function (yField) {\n      return {\n        xField: xField,\n        yField: yField\n      };\n    });\n  };\n\n  ScatterChartProxy.prototype.getCrossFilteringDataDomain = function (seriesDefinitions, params) {\n    var domain;\n\n    if (seriesDefinitions[0] && seriesDefinitions[0].sizeField) {\n      var sizeColId_1 = seriesDefinitions[0].sizeField.colId;\n      var allSizePoints_1 = [];\n      params.data.forEach(function (d) {\n        if (typeof d[sizeColId_1] !== 'undefined') {\n          allSizePoints_1.push(d[sizeColId_1]);\n        }\n\n        if (typeof d[sizeColId_1 + '-filtered-out'] !== 'undefined') {\n          allSizePoints_1.push(d[sizeColId_1 + '-filtered-out']);\n        }\n      });\n\n      if (allSizePoints_1.length > 0) {\n        domain = [Math.min.apply(Math, allSizePoints_1), Math.max.apply(Math, allSizePoints_1)];\n      }\n    }\n\n    return domain;\n  };\n\n  return ScatterChartProxy;\n}(CartesianChartProxy);\n\nexport { ScatterChartProxy };","map":{"version":3,"sources":["C:/dev/streamlit-aggrid/st_aggrid/frontend/node_modules/@ag-grid-enterprise/charts/dist/es6/charts/chartComp/chartProxies/cartesian/scatterChartProxy.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","_","ChartType","AgChart","ChartDataModel","CartesianChartProxy","ScatterChartProxy","_super","params","_this","getMarkersEnabled","initChartOptions","recreateChart","createChart","options","iChartOptions","agChartOptions","autoSize","axes","type","position","xAxis","yAxis","chartProxyParams","parentElement","update","fields","chart","removeAllSeries","crossFiltering","forEach","field","crossFilteringField","colId","push","seriesDefaults","seriesDefinitions","getSeriesDefinitions","paired","dataDomain","getCrossFilteringDataDomain","existingSeriesById","series","reduceRight","map","matchingIndex","findIndex","xField","xKey","yField","yKey","sizeField","sizeKey","set","removeSeries","Map","_a","getPalette","fills","strokes","fillsMod_1","fill","hexToRGBA","strokesMod_1","stroke","labelFieldDefinition","category","id","DEFAULT_CATEGORY","undefined","previousSeries","seriesDefinition","index","existingSeries","get","marker","shape","createComponent","fillOpacity","opacity","strokeOpacity","strokeWidth","width","tooltip","enabled","renderer","xFieldDefinition","yFieldDefinition","sizeFieldDefinition","title","displayName","xName","yName","data","sizeName","labelKey","labelName","name","isFilteredOutYKey","indexOf","legend","addEventListener","event","toggleSeriesItem","itemId","domain","delay","showInLegend","crossFilterCallback","addSeriesAfter","extractIChartOptionsFromTheme","theme","getConfig","colors","palette","label","size","highlightStyle","listeners","getTooltipsEnabled","getDefaultOptions","isBubble","chartType","Bubble","getDefaultCartesianChartOptions","maxSize","isBubbleChart","currentxField","filter","x","value","sizeColId_1","allSizePoints_1","Math","min","max"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,cAAa,GAAG,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,cAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd;AAAiB,YAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAA1C;AAAwD,KAF9E;;AAGA,WAAOP,cAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,cAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaA,IAAII,QAAQ,GAAI,QAAQ,KAAKA,QAAd,IAA2B,YAAY;AAClDA,EAAAA,QAAQ,GAAGV,MAAM,CAACW,MAAP,IAAiB,UAASC,CAAT,EAAY;AACpC,SAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAGC,SAAS,CAACC,MAAjC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;AACjDD,MAAAA,CAAC,GAAGG,SAAS,CAACF,CAAD,CAAb;;AACA,WAAK,IAAIV,CAAT,IAAcS,CAAd;AAAiB,YAAIb,MAAM,CAACQ,SAAP,CAAiBH,cAAjB,CAAgCa,IAAhC,CAAqCL,CAArC,EAAwCT,CAAxC,CAAJ,EACbQ,CAAC,CAACR,CAAD,CAAD,GAAOS,CAAC,CAACT,CAAD,CAAR;AADJ;AAEH;;AACD,WAAOQ,CAAP;AACH,GAPD;;AAQA,SAAOF,QAAQ,CAACS,KAAT,CAAe,IAAf,EAAqBH,SAArB,CAAP;AACH,CAVD;;AAWA,SAASI,CAAT,EAAYC,SAAZ,QAA6B,yBAA7B;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,SAASC,cAAT,QAA+B,sBAA/B;AACA,SAASC,mBAAT,QAAoC,uBAApC;;AACA,IAAIC,iBAAiB,GAAkB,UAAUC,MAAV,EAAkB;AACrD9B,EAAAA,SAAS,CAAC6B,iBAAD,EAAoBC,MAApB,CAAT;;AACA,WAASD,iBAAT,CAA2BE,MAA3B,EAAmC;AAC/B,QAAIC,KAAK,GAAGF,MAAM,CAACR,IAAP,CAAY,IAAZ,EAAkBS,MAAlB,KAA6B,IAAzC;;AACAC,IAAAA,KAAK,CAACC,iBAAN,GAA0B,YAAY;AAAE,aAAO,IAAP;AAAc,KAAtD,CAF+B,CAEyB;;;AACxDD,IAAAA,KAAK,CAACE,gBAAN;;AACAF,IAAAA,KAAK,CAACG,aAAN;;AACA,WAAOH,KAAP;AACH;;AACDH,EAAAA,iBAAiB,CAACjB,SAAlB,CAA4BwB,WAA5B,GAA0C,YAAY;AAClD,QAAIC,OAAO,GAAG,KAAKC,aAAnB;AACA,QAAIC,cAAc,GAAGF,OAArB;AACAE,IAAAA,cAAc,CAACC,QAAf,GAA0B,IAA1B;AACAD,IAAAA,cAAc,CAACE,IAAf,GAAsB,CAAC3B,QAAQ,CAAC;AAAE4B,MAAAA,IAAI,EAAE,QAAR;AAAkBC,MAAAA,QAAQ,EAAE;AAA5B,KAAD,EAAyCN,OAAO,CAACO,KAAjD,CAAT,EAAkE9B,QAAQ,CAAC;AAAE4B,MAAAA,IAAI,EAAE,QAAR;AAAkBC,MAAAA,QAAQ,EAAE;AAA5B,KAAD,EAAuCN,OAAO,CAACQ,KAA/C,CAA1E,CAAtB;AACA,WAAOnB,OAAO,CAACb,MAAR,CAAe0B,cAAf,EAA+B,KAAKO,gBAAL,CAAsBC,aAArD,CAAP;AACH,GAND;;AAOAlB,EAAAA,iBAAiB,CAACjB,SAAlB,CAA4BoC,MAA5B,GAAqC,UAAUjB,MAAV,EAAkB;AACnD,QAAIC,KAAK,GAAG,IAAZ;;AACA,QAAID,MAAM,CAACkB,MAAP,CAAc5B,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,WAAK6B,KAAL,CAAWC,eAAX;AACA;AACH;;AACD,QAAIF,MAAM,GAAGlB,MAAM,CAACkB,MAApB;;AACA,QAAI,KAAKG,cAAT,EAAyB;AACrB;AACAH,MAAAA,MAAM,CAACI,OAAP,CAAe,UAAUC,KAAV,EAAiB;AAC5B,YAAIC,mBAAmB,GAAGzC,QAAQ,CAAC,EAAD,EAAKwC,KAAL,CAAlC;;AACAC,QAAAA,mBAAmB,CAACC,KAApB,GAA4BF,KAAK,CAACE,KAAN,GAAc,eAA1C;AACAP,QAAAA,MAAM,CAACQ,IAAP,CAAYF,mBAAZ;AACH,OAJD;AAKH;;AACD,QAAIG,cAAc,GAAG,KAAKpB,aAAL,CAAmBoB,cAAxC;AACA,QAAIC,iBAAiB,GAAG,KAAKC,oBAAL,CAA0BX,MAA1B,EAAkCS,cAAc,CAACG,MAAjD,CAAxB;AACA,QAAIC,UAAJ;;AACA,QAAI,KAAKV,cAAT,EAAyB;AACrBU,MAAAA,UAAU,GAAG,KAAKC,2BAAL,CAAiCJ,iBAAjC,EAAoD5B,MAApD,CAAb;AACH;;AACD,QAAImB,KAAK,GAAG,KAAKA,KAAjB;AACA,QAAIc,kBAAkB,GAAGd,KAAK,CAACe,MAAN,CAAaC,WAAb,CAAyB,UAAUC,GAAV,EAAeF,MAAf,EAAuB/C,CAAvB,EAA0B;AACxE,UAAIkD,aAAa,GAAG5C,CAAC,CAAC6C,SAAF,CAAYV,iBAAZ,EAA+B,UAAU1C,CAAV,EAAa;AAC5D,eAAOA,CAAC,CAACqD,MAAF,CAASd,KAAT,KAAmBS,MAAM,CAACM,IAA1B,IACHtD,CAAC,CAACuD,MAAF,CAAShB,KAAT,KAAmBS,MAAM,CAACQ,IADvB,KAED,CAACxD,CAAC,CAACyD,SAAH,IAAgB,CAACT,MAAM,CAACU,OAAzB,IAAsC1D,CAAC,CAACyD,SAAF,IAAezD,CAAC,CAACyD,SAAF,CAAYlB,KAAZ,KAAsBS,MAAM,CAACU,OAFhF,CAAP;AAGH,OAJmB,CAApB;;AAKA,UAAIP,aAAa,KAAKlD,CAAtB,EAAyB;AACrBiD,QAAAA,GAAG,CAACS,GAAJ,CAAQX,MAAM,CAACQ,IAAf,EAAqBR,MAArB;AACH,OAFD,MAGK;AACDf,QAAAA,KAAK,CAAC2B,YAAN,CAAmBZ,MAAnB;AACH;;AACD,aAAOE,GAAP;AACH,KAbwB,EAatB,IAAIW,GAAJ,EAbsB,CAAzB;;AAcA,QAAIC,EAAE,GAAG,KAAKC,UAAL,EAAT;AAAA,QAA4BC,KAAK,GAAGF,EAAE,CAACE,KAAvC;AAAA,QAA8CC,OAAO,GAAGH,EAAE,CAACG,OAA3D;;AACA,QAAI,KAAK9B,cAAT,EAAyB;AACrB;AACA,UAAI+B,UAAU,GAAG,EAAjB;AACAF,MAAAA,KAAK,CAAC5B,OAAN,CAAc,UAAU+B,IAAV,EAAgB;AAC1BD,QAAAA,UAAU,CAAC1B,IAAX,CAAgB2B,IAAhB;AACAD,QAAAA,UAAU,CAAC1B,IAAX,CAAgBzB,KAAK,CAACqD,SAAN,CAAgBD,IAAhB,EAAsB,KAAtB,CAAhB;AACH,OAHD;AAIAH,MAAAA,KAAK,GAAGE,UAAR,CAPqB,CAQrB;;AACA,UAAIG,YAAY,GAAG,EAAnB;AACAJ,MAAAA,OAAO,CAAC7B,OAAR,CAAgB,UAAUkC,MAAV,EAAkB;AAC9BD,QAAAA,YAAY,CAAC7B,IAAb,CAAkB8B,MAAlB;AACAD,QAAAA,YAAY,CAAC7B,IAAb,CAAkBzB,KAAK,CAACqD,SAAN,CAAgBE,MAAhB,EAAwB,KAAxB,CAAlB;AACH,OAHD;AAIAL,MAAAA,OAAO,GAAGI,YAAV;AACH;;AACD,QAAIE,oBAAoB,GAAGzD,MAAM,CAAC0D,QAAP,CAAgBC,EAAhB,KAAuB/D,cAAc,CAACgE,gBAAtC,GAAyDC,SAAzD,GAAqE7D,MAAM,CAAC0D,QAAvG;AACA,QAAII,cAAJ;AACAlC,IAAAA,iBAAiB,CAACN,OAAlB,CAA0B,UAAUyC,gBAAV,EAA4BC,KAA5B,EAAmC;AACzD,UAAIC,cAAc,GAAGhC,kBAAkB,CAACiC,GAAnB,CAAuBH,gBAAgB,CAACtB,MAAjB,CAAwBhB,KAA/C,CAArB;;AACA,UAAI0C,MAAM,GAAGpF,QAAQ,CAAC,EAAD,EAAK4C,cAAc,CAACwC,MAApB,CAArB;;AACA,UAAIA,MAAM,CAACxD,IAAX,EAAiB;AAAE;AACfwD,QAAAA,MAAM,CAACC,KAAP,GAAeD,MAAM,CAACxD,IAAtB;AACA,eAAOwD,MAAM,CAACxD,IAAd;AACH;;AACD,UAAIuB,MAAM,GAAG+B,cAAc,IAAItE,OAAO,CAAC0E,eAAR,CAAwBtF,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK4C,cAAL,CAAT,EAA+B;AAAEhB,QAAAA,IAAI,EAAE,SAAR;AAAmB2D,QAAAA,WAAW,EAAE3C,cAAc,CAAC0B,IAAf,CAAoBkB,OAApD;AAA6DC,QAAAA,aAAa,EAAE7C,cAAc,CAAC6B,MAAf,CAAsBe,OAAlG;AAA2GE,QAAAA,WAAW,EAAE9C,cAAc,CAAC6B,MAAf,CAAsBkB,KAA9I;AAAqJP,QAAAA,MAAM,EAAEA,MAA7J;AAAqKQ,QAAAA,OAAO,EAAE;AACpQC,UAAAA,OAAO,EAAEjD,cAAc,CAACgD,OAAf,IAA0BhD,cAAc,CAACgD,OAAf,CAAuBC,OAD0M;AAEpQC,UAAAA,QAAQ,EAAElD,cAAc,CAACgD,OAAf,IAA0BhD,cAAc,CAACgD,OAAf,CAAuBC,OAAjD,IAA4DjD,cAAc,CAACgD,OAAf,CAAuBE;AAFuK;AAA9K,OAA/B,CAAhC,EAGrB,gBAHqB,CAA/B;;AAIA,UAAI,CAAC3C,MAAL,EAAa;AACT;AACH;;AACD,UAAIc,EAAE,GAAGe,gBAAT;AAAA,UAA2Be,gBAAgB,GAAG9B,EAAE,CAACT,MAAjD;AAAA,UAAyDwC,gBAAgB,GAAG/B,EAAE,CAACP,MAA/E;AAAA,UAAuFuC,mBAAmB,GAAGhC,EAAE,CAACL,SAAhH;AACAT,MAAAA,MAAM,CAAC+C,KAAP,GAAeF,gBAAgB,CAACG,WAAjB,GAA+B,MAA/B,GAAwCJ,gBAAgB,CAACI,WAAxE;AACAhD,MAAAA,MAAM,CAACM,IAAP,GAAcsC,gBAAgB,CAACrD,KAA/B;AACAS,MAAAA,MAAM,CAACiD,KAAP,GAAeL,gBAAgB,CAACI,WAAhC;AACAhD,MAAAA,MAAM,CAACQ,IAAP,GAAcqC,gBAAgB,CAACtD,KAA/B;AACAS,MAAAA,MAAM,CAACkD,KAAP,GAAeL,gBAAgB,CAACG,WAAhC;AACAhD,MAAAA,MAAM,CAACmD,IAAP,GAAcrF,MAAM,CAACqF,IAArB;AACAnD,MAAAA,MAAM,CAACmB,IAAP,GAAcH,KAAK,CAACc,KAAK,GAAGd,KAAK,CAAC5D,MAAf,CAAnB;AACA4C,MAAAA,MAAM,CAACsB,MAAP,GAAgBL,OAAO,CAACa,KAAK,GAAGb,OAAO,CAAC7D,MAAjB,CAAvB;;AACA,UAAI0F,mBAAJ,EAAyB;AACrB9C,QAAAA,MAAM,CAACU,OAAP,GAAiBoC,mBAAmB,CAACvD,KAArC;AACAS,QAAAA,MAAM,CAACoD,QAAP,GAAkBN,mBAAmB,CAACE,WAAtC;AACH,OAHD,MAIK;AACDhD,QAAAA,MAAM,CAACU,OAAP,GAAiBiB,SAAjB;AACH;;AACD,UAAIJ,oBAAJ,EAA0B;AACtBvB,QAAAA,MAAM,CAACqD,QAAP,GAAkB9B,oBAAoB,CAACE,EAAvC;AACAzB,QAAAA,MAAM,CAACsD,SAAP,GAAmB/B,oBAAoB,CAACgC,IAAxC;AACH,OAHD,MAIK;AACDvD,QAAAA,MAAM,CAACqD,QAAP,GAAkBrD,MAAM,CAACQ,IAAzB;AACH;;AACD,UAAIgD,iBAAiB,GAAGX,gBAAgB,CAACtD,KAAjB,CAAuBkE,OAAvB,CAA+B,eAA/B,IAAkD,CAAC,CAA3E;;AACA,UAAI1F,KAAK,CAACoB,cAAV,EAA0B;AACtB,YAAI,CAACqE,iBAAL,EAAwB;AACpB;AACAvE,UAAAA,KAAK,CAACyE,MAAN,CAAaC,gBAAb,CAA8B,OAA9B,EAAuC,UAAUC,KAAV,EAAiB;AACpD5D,YAAAA,MAAM,CAAC6D,gBAAP,CAAwBD,KAAK,CAACE,MAAN,GAAe,eAAvC,EAAwDF,KAAK,CAAClB,OAA9D;AACH,WAFD;AAGH;;AACD,YAAI7C,UAAJ,EAAgB;AACZG,UAAAA,MAAM,CAACiC,MAAP,CAAc8B,MAAd,GAAuBlE,UAAvB;AACH;;AACDZ,QAAAA,KAAK,CAACwD,OAAN,CAAcuB,KAAd,GAAsB,GAAtB,CAVsB,CAWtB;;AACA,YAAIR,iBAAJ,EAAuB;AACnBxD,UAAAA,MAAM,CAACiE,YAAP,GAAsB,KAAtB;AACH,SAdqB,CAetB;;;AACAjE,QAAAA,MAAM,CAAC2D,gBAAP,CAAwB,WAAxB,EAAqC5F,KAAK,CAACmG,mBAA3C;AACH;;AACD,UAAI,CAACnC,cAAL,EAAqB;AACjB9C,QAAAA,KAAK,CAACkF,cAAN,CAAqBnE,MAArB,EAA6B4B,cAA7B;AACH;;AACDA,MAAAA,cAAc,GAAG5B,MAAjB;AACH,KA5DD;AA6DH,GApHD;;AAqHApC,EAAAA,iBAAiB,CAACjB,SAAlB,CAA4ByH,6BAA5B,GAA4D,UAAUC,KAAV,EAAiB;AACzE,QAAIjG,OAAO,GAAGP,MAAM,CAAClB,SAAP,CAAiByH,6BAAjB,CAA+C/G,IAA/C,CAAoD,IAApD,EAA0DgH,KAA1D,CAAd;;AACA,QAAI5E,cAAc,GAAG4E,KAAK,CAACC,SAAN,CAAgB,wBAAhB,CAArB;AACAlG,IAAAA,OAAO,CAACqB,cAAR,GAAyB;AACrBgD,MAAAA,OAAO,EAAE;AACLC,QAAAA,OAAO,EAAEjD,cAAc,CAACgD,OAAf,IAA0BhD,cAAc,CAACgD,OAAf,CAAuBC,OADrD;AAELC,QAAAA,QAAQ,EAAElD,cAAc,CAACgD,OAAf,IAA0BhD,cAAc,CAACgD,OAAf,CAAuBE;AAFtD,OADY;AAKrBxB,MAAAA,IAAI,EAAE;AACFoD,QAAAA,MAAM,EAAG9E,cAAc,CAAC0B,IAAf,IAAuB,CAAC1B,cAAc,CAAC0B,IAAhB,CAAxB,IAAkDkD,KAAK,CAACG,OAAN,CAAcxD,KADtE;AAEFqB,QAAAA,OAAO,EAAE5C,cAAc,CAAC2C;AAFtB,OALe;AASrBd,MAAAA,MAAM,EAAE;AACJiD,QAAAA,MAAM,EAAG9E,cAAc,CAAC6B,MAAf,IAAyB,CAAC7B,cAAc,CAAC6B,MAAhB,CAA1B,IAAsD+C,KAAK,CAACG,OAAN,CAAcvD,OADxE;AAEJoB,QAAAA,OAAO,EAAE5C,cAAc,CAAC6C,aAFpB;AAGJE,QAAAA,KAAK,EAAE/C,cAAc,CAAC8C;AAHlB,OATa;AAcrBkC,MAAAA,KAAK,EAAEhF,cAAc,CAACgF,KAdD;AAerBxC,MAAAA,MAAM,EAAE;AACJS,QAAAA,OAAO,EAAEjD,cAAc,CAACwC,MAAf,CAAsBS,OAD3B;AAEJR,QAAAA,KAAK,EAAEzC,cAAc,CAACwC,MAAf,CAAsBC,KAFzB;AAGJwC,QAAAA,IAAI,EAAEjF,cAAc,CAACwC,MAAf,CAAsByC,IAHxB;AAIJnC,QAAAA,WAAW,EAAE9C,cAAc,CAACwC,MAAf,CAAsBM;AAJ/B,OAfa;AAqBrBoC,MAAAA,cAAc,EAAElF,cAAc,CAACkF,cArBV;AAsBrBC,MAAAA,SAAS,EAAEnF,cAAc,CAACmF,SAtBL;AAuBrBhF,MAAAA,MAAM,EAAE;AAvBa,KAAzB;AAyBA,WAAOxB,OAAP;AACH,GA7BD;;AA8BAR,EAAAA,iBAAiB,CAACjB,SAAlB,CAA4BkI,kBAA5B,GAAiD,YAAY;AACzD,WAAO,KAAKxG,aAAL,CAAmBoB,cAAnB,CAAkCgD,OAAlC,IAA6C,IAA7C,IAAqD,CAAC,CAAC,KAAKpE,aAAL,CAAmBoB,cAAnB,CAAkCgD,OAAlC,CAA0CC,OAAxG;AACH,GAFD;;AAGA9E,EAAAA,iBAAiB,CAACjB,SAAlB,CAA4BmI,iBAA5B,GAAgD,YAAY;AACxD,QAAIC,QAAQ,GAAG,KAAKC,SAAL,KAAmBxH,SAAS,CAACyH,MAA5C;AACA,QAAI7G,OAAO,GAAG,KAAK8G,+BAAL,EAAd;AACA9G,IAAAA,OAAO,CAACqB,cAAR,GAAyB5C,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKuB,OAAO,CAACqB,cAAb,CAAT,EAAuC;AAAE0B,MAAAA,IAAI,EAAEtE,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKuB,OAAO,CAACqB,cAAR,CAAuB0B,IAA5B,CAAT,EAA4C;AAAEkB,QAAAA,OAAO,EAAE0C,QAAQ,GAAG,GAAH,GAAS;AAA5B,OAA5C,CAAhB;AAA8FzD,MAAAA,MAAM,EAAEzE,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKuB,OAAO,CAACqB,cAAR,CAAuB6B,MAA5B,CAAT,EAA8C;AAAEkB,QAAAA,KAAK,EAAE;AAAT,OAA9C,CAA9G;AAA2KP,MAAAA,MAAM,EAAE;AACnPC,QAAAA,KAAK,EAAE,QAD4O;AAEnPQ,QAAAA,OAAO,EAAE,IAF0O;AAGnPgC,QAAAA,IAAI,EAAE,CAH6O;AAInPS,QAAAA,OAAO,EAAE,EAJ0O;AAKnP5C,QAAAA,WAAW,EAAE;AALsO,OAAnL;AAMjEE,MAAAA,OAAO,EAAE;AACRC,QAAAA,OAAO,EAAE;AADD,OANwD;AAQjE9C,MAAAA,MAAM,EAAE;AARyD,KAAvC,CAAjC;AASA,WAAOxB,OAAP;AACH,GAbD;;AAcAR,EAAAA,iBAAiB,CAACjB,SAAlB,CAA4BgD,oBAA5B,GAAmD,UAAUX,MAAV,EAAkBY,MAAlB,EAA0B;AACzE,QAAIZ,MAAM,CAAC5B,MAAP,GAAgB,CAApB,EAAuB;AACnB,aAAO,EAAP;AACH;;AACD,QAAIgI,aAAa,GAAG,KAAKJ,SAAL,KAAmBxH,SAAS,CAACyH,MAAjD;;AACA,QAAIrF,MAAJ,EAAY;AACR,UAAIwF,aAAJ,EAAmB;AACf,eAAOpG,MAAM,CAACkB,GAAP,CAAW,UAAUmF,aAAV,EAAyBpI,CAAzB,EAA4B;AAAE,iBAAOA,CAAC,GAAG,CAAJ,KAAU,CAAV,GAAe;AAClEoD,YAAAA,MAAM,EAAEgF,aAD0D;AAElE9E,YAAAA,MAAM,EAAEvB,MAAM,CAAC/B,CAAC,GAAG,CAAL,CAFoD;AAGlEwD,YAAAA,SAAS,EAAEzB,MAAM,CAAC/B,CAAC,GAAG,CAAL;AAHiD,WAAf,GAIlD,IAJ2C;AAIpC,SAJL,EAIOqI,MAJP,CAIc,UAAUC,CAAV,EAAa;AAAE,iBAAOA,CAAC,IAAIA,CAAC,CAAChF,MAAP,IAAiBgF,CAAC,CAAC9E,SAA1B;AAAsC,SAJnE,CAAP;AAKH;;AACD,aAAOzB,MAAM,CAACkB,GAAP,CAAW,UAAUmF,aAAV,EAAyBpI,CAAzB,EAA4B;AAAE,eAAOA,CAAC,GAAG,CAAJ,KAAU,CAAV,GAAe;AAClEoD,UAAAA,MAAM,EAAEgF,aAD0D;AAElE9E,UAAAA,MAAM,EAAEvB,MAAM,CAAC/B,CAAC,GAAG,CAAL;AAFoD,SAAf,GAGlD,IAH2C;AAGpC,OAHL,EAGOqI,MAHP,CAGc,UAAUC,CAAV,EAAa;AAAE,eAAOA,CAAC,IAAIA,CAAC,CAAChF,MAAd;AAAuB,OAHpD,CAAP;AAIH;;AACD,QAAIF,MAAM,GAAGrB,MAAM,CAAC,CAAD,CAAnB;;AACA,QAAIoG,aAAJ,EAAmB;AACf,aAAOpG,MAAM,CACRkB,GADE,CACE,UAAUK,MAAV,EAAkBtD,CAAlB,EAAqB;AAAE,eAAOA,CAAC,GAAG,CAAJ,KAAU,CAAV,GAAe;AAClDoD,UAAAA,MAAM,EAAEA,MAD0C;AAElDE,UAAAA,MAAM,EAAEA,MAF0C;AAGlDE,UAAAA,SAAS,EAAEzB,MAAM,CAAC/B,CAAC,GAAG,CAAL;AAHiC,SAAf,GAIlC,IAJ2B;AAIpB,OALL,EAMFqI,MANE,CAMK,UAAUC,CAAV,EAAa;AAAE,eAAOA,CAAC,IAAIA,CAAC,CAAC9E,SAAd;AAA0B,OAN9C,CAAP;AAOH;;AACD,WAAOzB,MAAM,CAACsG,MAAP,CAAc,UAAUE,KAAV,EAAiBvI,CAAjB,EAAoB;AAAE,aAAOA,CAAC,GAAG,CAAX;AAAe,KAAnD,EAAqDiD,GAArD,CAAyD,UAAUK,MAAV,EAAkB;AAAE,aAAQ;AAAEF,QAAAA,MAAM,EAAEA,MAAV;AAAkBE,QAAAA,MAAM,EAAEA;AAA1B,OAAR;AAA8C,KAA3H,CAAP;AACH,GA7BD;;AA8BA3C,EAAAA,iBAAiB,CAACjB,SAAlB,CAA4BmD,2BAA5B,GAA0D,UAAUJ,iBAAV,EAA6B5B,MAA7B,EAAqC;AAC3F,QAAIiG,MAAJ;;AACA,QAAIrE,iBAAiB,CAAC,CAAD,CAAjB,IAAwBA,iBAAiB,CAAC,CAAD,CAAjB,CAAqBe,SAAjD,EAA4D;AACxD,UAAIgF,WAAW,GAAG/F,iBAAiB,CAAC,CAAD,CAAjB,CAAqBe,SAArB,CAA+BlB,KAAjD;AACA,UAAImG,eAAe,GAAG,EAAtB;AACA5H,MAAAA,MAAM,CAACqF,IAAP,CAAY/D,OAAZ,CAAoB,UAAUnD,CAAV,EAAa;AAC7B,YAAI,OAAOA,CAAC,CAACwJ,WAAD,CAAR,KAA0B,WAA9B,EAA2C;AACvCC,UAAAA,eAAe,CAAClG,IAAhB,CAAqBvD,CAAC,CAACwJ,WAAD,CAAtB;AACH;;AACD,YAAI,OAAOxJ,CAAC,CAACwJ,WAAW,GAAG,eAAf,CAAR,KAA4C,WAAhD,EAA6D;AACzDC,UAAAA,eAAe,CAAClG,IAAhB,CAAqBvD,CAAC,CAACwJ,WAAW,GAAG,eAAf,CAAtB;AACH;AACJ,OAPD;;AAQA,UAAIC,eAAe,CAACtI,MAAhB,GAAyB,CAA7B,EAAgC;AAC5B2G,QAAAA,MAAM,GAAG,CAAC4B,IAAI,CAACC,GAAL,CAAStI,KAAT,CAAeqI,IAAf,EAAqBD,eAArB,CAAD,EAAwCC,IAAI,CAACE,GAAL,CAASvI,KAAT,CAAeqI,IAAf,EAAqBD,eAArB,CAAxC,CAAT;AACH;AACJ;;AACD,WAAO3B,MAAP;AACH,GAlBD;;AAmBA,SAAOnG,iBAAP;AACH,CAtOsC,CAsOrCD,mBAtOqC,CAAvC;;AAuOA,SAASC,iBAAT","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { _, ChartType } from \"@ag-grid-community/core\";\nimport { AgChart } from \"ag-charts-community\";\nimport { ChartDataModel } from \"../../chartDataModel\";\nimport { CartesianChartProxy } from \"./cartesianChartProxy\";\nvar ScatterChartProxy = /** @class */ (function (_super) {\n    __extends(ScatterChartProxy, _super);\n    function ScatterChartProxy(params) {\n        var _this = _super.call(this, params) || this;\n        _this.getMarkersEnabled = function () { return true; }; // markers are always enabled on scatter charts\n        _this.initChartOptions();\n        _this.recreateChart();\n        return _this;\n    }\n    ScatterChartProxy.prototype.createChart = function () {\n        var options = this.iChartOptions;\n        var agChartOptions = options;\n        agChartOptions.autoSize = true;\n        agChartOptions.axes = [__assign({ type: 'number', position: 'bottom' }, options.xAxis), __assign({ type: 'number', position: 'left' }, options.yAxis)];\n        return AgChart.create(agChartOptions, this.chartProxyParams.parentElement);\n    };\n    ScatterChartProxy.prototype.update = function (params) {\n        var _this = this;\n        if (params.fields.length < 2) {\n            this.chart.removeAllSeries();\n            return;\n        }\n        var fields = params.fields;\n        if (this.crossFiltering) {\n            // add additional filtered out field\n            fields.forEach(function (field) {\n                var crossFilteringField = __assign({}, field);\n                crossFilteringField.colId = field.colId + '-filtered-out';\n                fields.push(crossFilteringField);\n            });\n        }\n        var seriesDefaults = this.iChartOptions.seriesDefaults;\n        var seriesDefinitions = this.getSeriesDefinitions(fields, seriesDefaults.paired);\n        var dataDomain;\n        if (this.crossFiltering) {\n            dataDomain = this.getCrossFilteringDataDomain(seriesDefinitions, params);\n        }\n        var chart = this.chart;\n        var existingSeriesById = chart.series.reduceRight(function (map, series, i) {\n            var matchingIndex = _.findIndex(seriesDefinitions, function (s) {\n                return s.xField.colId === series.xKey &&\n                    s.yField.colId === series.yKey &&\n                    ((!s.sizeField && !series.sizeKey) || (s.sizeField && s.sizeField.colId === series.sizeKey));\n            });\n            if (matchingIndex === i) {\n                map.set(series.yKey, series);\n            }\n            else {\n                chart.removeSeries(series);\n            }\n            return map;\n        }, new Map());\n        var _a = this.getPalette(), fills = _a.fills, strokes = _a.strokes;\n        if (this.crossFiltering) {\n            // introduce cross filtering transparent fills\n            var fillsMod_1 = [];\n            fills.forEach(function (fill) {\n                fillsMod_1.push(fill);\n                fillsMod_1.push(_this.hexToRGBA(fill, '0.3'));\n            });\n            fills = fillsMod_1;\n            // introduce cross filtering transparent strokes\n            var strokesMod_1 = [];\n            strokes.forEach(function (stroke) {\n                strokesMod_1.push(stroke);\n                strokesMod_1.push(_this.hexToRGBA(stroke, '0.3'));\n            });\n            strokes = strokesMod_1;\n        }\n        var labelFieldDefinition = params.category.id === ChartDataModel.DEFAULT_CATEGORY ? undefined : params.category;\n        var previousSeries;\n        seriesDefinitions.forEach(function (seriesDefinition, index) {\n            var existingSeries = existingSeriesById.get(seriesDefinition.yField.colId);\n            var marker = __assign({}, seriesDefaults.marker);\n            if (marker.type) { // deprecated\n                marker.shape = marker.type;\n                delete marker.type;\n            }\n            var series = existingSeries || AgChart.createComponent(__assign(__assign({}, seriesDefaults), { type: 'scatter', fillOpacity: seriesDefaults.fill.opacity, strokeOpacity: seriesDefaults.stroke.opacity, strokeWidth: seriesDefaults.stroke.width, marker: marker, tooltip: {\n                    enabled: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled,\n                    renderer: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled && seriesDefaults.tooltip.renderer,\n                } }), 'scatter.series');\n            if (!series) {\n                return;\n            }\n            var _a = seriesDefinition, xFieldDefinition = _a.xField, yFieldDefinition = _a.yField, sizeFieldDefinition = _a.sizeField;\n            series.title = yFieldDefinition.displayName + \" vs \" + xFieldDefinition.displayName;\n            series.xKey = xFieldDefinition.colId;\n            series.xName = xFieldDefinition.displayName;\n            series.yKey = yFieldDefinition.colId;\n            series.yName = yFieldDefinition.displayName;\n            series.data = params.data;\n            series.fill = fills[index % fills.length];\n            series.stroke = strokes[index % strokes.length];\n            if (sizeFieldDefinition) {\n                series.sizeKey = sizeFieldDefinition.colId;\n                series.sizeName = sizeFieldDefinition.displayName;\n            }\n            else {\n                series.sizeKey = undefined;\n            }\n            if (labelFieldDefinition) {\n                series.labelKey = labelFieldDefinition.id;\n                series.labelName = labelFieldDefinition.name;\n            }\n            else {\n                series.labelKey = series.yKey;\n            }\n            var isFilteredOutYKey = yFieldDefinition.colId.indexOf('-filtered-out') > -1;\n            if (_this.crossFiltering) {\n                if (!isFilteredOutYKey) {\n                    // sync toggling of legend item with hidden 'filtered out' item\n                    chart.legend.addEventListener('click', function (event) {\n                        series.toggleSeriesItem(event.itemId + '-filtered-out', event.enabled);\n                    });\n                }\n                if (dataDomain) {\n                    series.marker.domain = dataDomain;\n                }\n                chart.tooltip.delay = 500;\n                // hide 'filtered out' legend items\n                if (isFilteredOutYKey) {\n                    series.showInLegend = false;\n                }\n                // add node click cross filtering callback to series\n                series.addEventListener('nodeClick', _this.crossFilterCallback);\n            }\n            if (!existingSeries) {\n                chart.addSeriesAfter(series, previousSeries);\n            }\n            previousSeries = series;\n        });\n    };\n    ScatterChartProxy.prototype.extractIChartOptionsFromTheme = function (theme) {\n        var options = _super.prototype.extractIChartOptionsFromTheme.call(this, theme);\n        var seriesDefaults = theme.getConfig('scatter.series.scatter');\n        options.seriesDefaults = {\n            tooltip: {\n                enabled: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled,\n                renderer: seriesDefaults.tooltip && seriesDefaults.tooltip.renderer\n            },\n            fill: {\n                colors: (seriesDefaults.fill && [seriesDefaults.fill]) || theme.palette.fills,\n                opacity: seriesDefaults.fillOpacity,\n            },\n            stroke: {\n                colors: (seriesDefaults.stroke && [seriesDefaults.stroke]) || theme.palette.strokes,\n                opacity: seriesDefaults.strokeOpacity,\n                width: seriesDefaults.strokeWidth\n            },\n            label: seriesDefaults.label,\n            marker: {\n                enabled: seriesDefaults.marker.enabled,\n                shape: seriesDefaults.marker.shape,\n                size: seriesDefaults.marker.size,\n                strokeWidth: seriesDefaults.marker.strokeWidth\n            },\n            highlightStyle: seriesDefaults.highlightStyle,\n            listeners: seriesDefaults.listeners,\n            paired: true\n        };\n        return options;\n    };\n    ScatterChartProxy.prototype.getTooltipsEnabled = function () {\n        return this.iChartOptions.seriesDefaults.tooltip != null && !!this.iChartOptions.seriesDefaults.tooltip.enabled;\n    };\n    ScatterChartProxy.prototype.getDefaultOptions = function () {\n        var isBubble = this.chartType === ChartType.Bubble;\n        var options = this.getDefaultCartesianChartOptions();\n        options.seriesDefaults = __assign(__assign({}, options.seriesDefaults), { fill: __assign(__assign({}, options.seriesDefaults.fill), { opacity: isBubble ? 0.7 : 1 }), stroke: __assign(__assign({}, options.seriesDefaults.stroke), { width: 3 }), marker: {\n                shape: 'circle',\n                enabled: true,\n                size: 6,\n                maxSize: 30,\n                strokeWidth: 1,\n            }, tooltip: {\n                enabled: true,\n            }, paired: true });\n        return options;\n    };\n    ScatterChartProxy.prototype.getSeriesDefinitions = function (fields, paired) {\n        if (fields.length < 2) {\n            return [];\n        }\n        var isBubbleChart = this.chartType === ChartType.Bubble;\n        if (paired) {\n            if (isBubbleChart) {\n                return fields.map(function (currentxField, i) { return i % 3 === 0 ? ({\n                    xField: currentxField,\n                    yField: fields[i + 1],\n                    sizeField: fields[i + 2],\n                }) : null; }).filter(function (x) { return x && x.yField && x.sizeField; });\n            }\n            return fields.map(function (currentxField, i) { return i % 2 === 0 ? ({\n                xField: currentxField,\n                yField: fields[i + 1],\n            }) : null; }).filter(function (x) { return x && x.yField; });\n        }\n        var xField = fields[0];\n        if (isBubbleChart) {\n            return fields\n                .map(function (yField, i) { return i % 2 === 1 ? ({\n                xField: xField,\n                yField: yField,\n                sizeField: fields[i + 1],\n            }) : null; })\n                .filter(function (x) { return x && x.sizeField; });\n        }\n        return fields.filter(function (value, i) { return i > 0; }).map(function (yField) { return ({ xField: xField, yField: yField }); });\n    };\n    ScatterChartProxy.prototype.getCrossFilteringDataDomain = function (seriesDefinitions, params) {\n        var domain;\n        if (seriesDefinitions[0] && seriesDefinitions[0].sizeField) {\n            var sizeColId_1 = seriesDefinitions[0].sizeField.colId;\n            var allSizePoints_1 = [];\n            params.data.forEach(function (d) {\n                if (typeof d[sizeColId_1] !== 'undefined') {\n                    allSizePoints_1.push(d[sizeColId_1]);\n                }\n                if (typeof d[sizeColId_1 + '-filtered-out'] !== 'undefined') {\n                    allSizePoints_1.push(d[sizeColId_1 + '-filtered-out']);\n                }\n            });\n            if (allSizePoints_1.length > 0) {\n                domain = [Math.min.apply(Math, allSizePoints_1), Math.max.apply(Math, allSizePoints_1)];\n            }\n        }\n        return domain;\n    };\n    return ScatterChartProxy;\n}(CartesianChartProxy));\nexport { ScatterChartProxy };\n"]},"metadata":{},"sourceType":"module"}