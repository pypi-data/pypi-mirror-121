(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[866],{3866:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>I});var n=o(3673),a=o(2323);const r={class:"q-pa-none"},i={class:"row"},l={class:"col q-ma-sm"},s={class:"q-pa-md",style:{"max-width":"400px"}},c={class:"q-mb-none"},u={class:"q-mb-none"},d={key:0},h={class:"row"},m={class:"col-6 text-center"},p=(0,n.Uk)(" Library "),g={class:"col-6 text-center"},w=(0,n.Uk)(" Plugins ");function k(e,t,o,k,f,y){const b=(0,n.up)("q-skeleton"),q=(0,n.up)("q-input"),v=(0,n.up)("q-slider"),C=(0,n.up)("q-separator"),W=(0,n.up)("q-icon"),_=(0,n.up)("q-btn"),P=(0,n.up)("q-form"),$=(0,n.up)("q-card"),Q=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(Q,{padding:""},{default:(0,n.w5)((()=>[(0,n.Wm)("div",r,[(0,n.Wm)("div",i,[(0,n.Wm)("div",l,[(0,n.Wm)("div",s,[(0,n.Wm)(P,{onSubmit:y.save,class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)("h5",c,(0,a.zw)(e.$t("components.settings.workers.workerCount")),1),null===f.workerCount?((0,n.wg)(),(0,n.j4)(b,{key:0,type:"QInput"})):(0,n.kq)("",!0),null!==f.workerCount?((0,n.wg)(),(0,n.j4)(q,{key:1,readonly:"",outlined:"",color:"primary",modelValue:f.workerCount,"onUpdate:modelValue":t[1]||(t[1]=e=>f.workerCount=e),label:e.$t("components.settings.workers.workerCount"),placeholder:f.workerCount},null,8,["modelValue","label","placeholder"])):(0,n.kq)("",!0),null===f.workerCount?((0,n.wg)(),(0,n.j4)(b,{key:2,type:"QSlider"})):(0,n.kq)("",!0),null!==f.workerCount?((0,n.wg)(),(0,n.j4)(v,{key:3,modelValue:f.workerCount,"onUpdate:modelValue":t[2]||(t[2]=e=>f.workerCount=e),min:1,max:12,color:"primary"},null,8,["modelValue"])):(0,n.kq)("",!0),(0,n.Wm)(C,{class:"q-my-lg"}),(0,n.Wm)("h5",u,(0,a.zw)(e.$t("components.settings.workers.path")),1),null===f.cachePath?((0,n.wg)(),(0,n.j4)(b,{key:4,type:"QInput"})):((0,n.wg)(),(0,n.j4)(q,{key:5,readonly:"",outlined:"",color:"primary",modelValue:f.cachePath,"onUpdate:modelValue":t[3]||(t[3]=e=>f.cachePath=e),label:e.$t("components.settings.workers.path"),placeholder:f.cachePath,onClick:y.updateLibraryWithDirectoryBrowser},{append:(0,n.w5)((()=>[(0,n.Wm)(W,{onClick:y.updateLibraryWithDirectoryBrowser,class:"cursor-pointer",name:"folder_open"},null,8,["onClick"])])),_:1},8,["modelValue","label","placeholder","onClick"])),(0,n.Wm)("div",null,[(0,n.Wm)(_,{label:e.$t("navigation.submit"),type:"submit",color:"secondary"},null,8,["label"])])])),_:1},8,["onSubmit"])])])]),e.$q.platform.is.mobile?((0,n.wg)(),(0,n.j4)("div",d,[(0,n.Wm)(C,{class:"q-mb-lg"}),(0,n.Wm)("div",h,[(0,n.Wm)("div",m,[(0,n.Wm)($,{flat:"",bordered:"",onClick:t[4]||(t[4]=t=>e.$router.push("/ui/settings-library")),class:"bg-grey-1 q-ma-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{icon:"navigate_before",flat:""},{default:(0,n.w5)((()=>[p])),_:1})])),_:1})]),(0,n.Wm)("div",g,[(0,n.Wm)($,{flat:"",bordered:"",onClick:t[5]||(t[5]=t=>e.$router.push("/ui/settings-plugins")),class:"bg-grey-1 q-ma-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{"icon-right":"navigate_next",flat:""},{default:(0,n.w5)((()=>[w])),_:1})])),_:1})])])])):(0,n.kq)("",!0)])])),_:1})}var f=o(4190),y=o(1959),b=o(8825),q=o(5948),v=o(1536),C=o(52),W=o.n(C),_=o(7689);const P={name:"SettingsLibrary",setup(){(0,b.Z)();const{t:e}=(0,q.QT)();let t=null,o=(0,f.A)(e);function a(){t=o.init()}function r(){o.close()}(0,n.bv)((()=>{a()})),(0,n.Ah)((()=>{r()}))},data(){return{workerCount:(0,y.iH)(null),cachePath:(0,y.iH)(null)}},methods:{updateLibraryWithDirectoryBrowser:function(){this.$q.dialog({component:v.Z,componentProps:{dialogHeader:this.$t("headers.selectDirectory"),initialPath:this.cachePath,listType:"directories"}}).onOk((e=>{"undefined"!==typeof e.selectedPath&&null!==e.selectedPath&&(this.cachePath=e.selectedPath)})).onDismiss((()=>{}))},fetchSettings:function(){W()({method:"get",url:(0,_.J4)("v2","settings/read")}).then((e=>{this.workerCount=e.data.settings.number_of_workers,this.cachePath=e.data.settings.cache_path})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},save:function(){let e={settings:{number_of_workers:this.workerCount,cache_path:this.cachePath}};W()({method:"post",url:(0,_.J4)("v2","settings/write"),data:e}).then((e=>{this.fetchSettings(),this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},created(){this.fetchSettings()}};var $=o(4379),Q=o(5269),S=o(4103),Z=o(4842),V=o(4554),j=o(2064),x=o(5869),D=o(2165),L=o(151),U=o(7518),B=o.n(U);P.render=k;const I=P;B()(P,"components",{QPage:$.Z,QForm:Q.Z,QSkeleton:S.ZP,QInput:Z.Z,QIcon:V.Z,QSlider:j.Z,QSeparator:x.Z,QBtn:D.Z,QCard:L.Z})}}]);