{    
    "format_version": {
        "description": "Version of this file's schema",
        "type": "string",
        "pattern": "^1\\.0$|^0.110$"
    },
    "author" : {
        "oneOf": [
            {"$ref": "#/jsonref"},
            {
                "description": "Date provenance of instrumentation information",
                "type": "object",
                "required": ["first_name", "last_name"],
                "properties": {
                    "first_name": {"type": "string"},
                    "last_name": {"type": "string"},
                    "institution": {"type": "string"},
                    "email": {"type": "string", "format": "email"},
                    "phones": {"type": "array", "items": {"$ref": "#/phone"}}
                }
            }
        ]
    },
    "yaml_anchors" : {
        "type": "object",
        "description": "Free-form object used to define anchors in YAML files"
    },
    "extras" : {
        "type": "object",
        "description": "Free-form object for attribute additions to information files"
    },
    "note_list": {
        "type" : "array",
        "description" : "list of comments (should be included in output metadata)",
        "minItems": 0,
        "items" : {
            "oneOf": [
                {"$ref":"#/_basic_comment"},
                {"$ref":"#/_stationxml_comment"}
            ]
        }
    },
    "_basic_comment": {
        "type": "string",
        "minimum": 2
    }, 
    "_stationxml_comment": {
        "type" : "object", 
        "required": ["value"],
        "properties" : {
            "value":                {"type":"string"},
            "begin_effective_time": {"$ref": "#/date-time-Z"},
            "end_effective_time":   {"$ref": "#/date-time-Z"},
            "authors":              {"type": "array", "items": {"$ref": "#/author"}}
        }
    },
    "operator" : {
        "description": "Operator information",
        "type": "object",
        "required" : [ "reference_name" ],
        "properties" : {
            "reference_name":  {"$ref": "definitions.schema.json#/reference_name"},
            "full_name":    {"type": "string" ,  "description": "Full operator name"},
            "contact":      {"$ref": "definitions.schema.json#/contact_name"},
            "phone_number": {"type": "string", "description": "Phone" },
            "email":        {"type": "string", "format": "email"},
            "website":      {"$ref": "definitions.schema.json#/website"}
        },
        "additionalProperties" : false
    },
    "contact_name": { 
        "type" : "object", 
        "description": "Contact person name",
        "required": ["first_name", "last_name"],
        "properties" : {
            "first_name": {"type":"string"},
            "last_name":  {"type":"string"}
        }
    },
    "date": {
        "type": "string",
        "description": "Date in yyyy-mm-dd format",
        "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    },
    "date_or_null": {
        "oneOf": [
            {
                "type": "string",
                "description": "yyyy-mm-dd date",
                "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
            },
            {   "type" : "null"}
        ]
    },
    "date-time-Z": {
        "oneOf" : [
            {
                "type": "string",
                "description": "Date-time in ISO format with Z for GMT+0. The Z is not required.",
                "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]*)?[Z]*$"
            },
            {"type" : "null"}
        ]
    },
    "ISOdatetime": {
        "oneOf" : [
            {
                "type": "string",
                "description": "Date-time in ISO format with Z for GMT+0. The Z is not required.",
                "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]*)?[Z]*$"
            },
            {"type" : "null"}
        ]
    },
    "email": {
        "type": "string",
        "format": "email"
    },
    "notes": {
        "type": "array",
        "description": "list of notes (should not be included in output metadata)",
        "minItems": 0,
        "items": {"type": "string", "minLength": 1 }
    },
    "phone": {
        "oneOf": [
            {
                "description": "Phone in international format",
                "type": "string",
                "pattern": "^\\+{0,1}[0-9]{1,3}(\\([0-9]+\\)){0,1}([0-9]+[ -])*[0-9]+"
            },
            {
                "description": "Phone in US format",
                "type": "object",
                "required": ["area_code", "phone_number"],
                "properties": {
                    "country_code": {
                        "type": "string",
                        "pattern": "^\\+{0,1}[0-9]{1,3}$"
                    },
                    "area_code": {
                        "type": "string",
                        "pattern": "^\\({0,1}[0-9]{3}\\){0,1}$"
                    },
                    "phone_number": {
                        "type": "string",
                        "pattern": "^[0-9]+\\-[0-9]+$"
                    }
                }
            }
        ]
    },
    "reference_name": {
        "type": "string",
        "description": "campaign or operator reference name"
    },
    "restricted_state": {
        "type": "string",
        "description": "restricted state"
    },
    "revision": {
        "oneOf": [
            {"$ref": "#/jsonref"},
            {
                "description": "Date provenance of instrumentation information",
                "type": "object",
                "required": ["date", "authors"],
                "properties": {
                    "date": {"$ref": "#/date"},
                    "authors": {
                        "type": "array",
                        "minItems" : 1,
                        "items" : {"$ref": "#/author"}
                    }
                }
            }
        ]
    },
    "jsonref": { 
        "type": "object",
        "required": ["$ref"],
        "properties": {
            "$ref": {"type": "string"}
        },
        "additionalProperties": false
    },
    "string_or_null": { 
        "type": ["string" , "null"]
    },
    "URI_and_revision": {
        "type": "object",
        "description": "URI and revision date of file to be loaded",
        "required" : ["$ref","revision_date"],
        "properties" : {
            "$ref" : {"type":"string"},
            "revision_date": {
                "oneOf" : [
                    { "$ref" :"#/date-time-Z"},
                    { "$ref" :"#/date_or_null"}
                ]
            }
        },
        "additionalProperties" : false
    },
    "URI_ref": {
        "type": "object",
        "description": "URI to file containing information to be loaded here",
        "required": ["$ref"],
        "properties": {"$ref": {"type": "string"}},
        "additionalProperties": false
    },
    "website": {
        "type": "string",
        "format": "uri"
    },
    "any_date":{
        "oneOf" :[
            {"$ref": "#/date" },
            {"$ref": "#/date-time-Z"}
        ]
    },
    "orientation_coordinates": { 
        "type": "object",
        "properties": {
            "azimuth": {"type": "number"},
            "dip":  {"type": "number"}   
        }
    },
    "equipmentType": {
        "type": "object",
        "required": ["type", "description", "manufacturer",
                       "model"],
        "properties": {
            "type":              {"type": ["string","null"]},
            "description":       {"type": ["string","null"]},
            "manufacturer":      {"type": ["string","null"]},
            "vendor":            {"type": ["string","null"]},
            "model":             {"type": ["string","null"]},
            "serial_number":     {"type": ["string","null"]},
            "installation_date": {"$ref": "definitions.schema.json#/any_date" },
            "removal_date":      {"$ref": "definitions.schema.json#/any_date" },
            "calibration_dates": {"$ref": "definitions.schema.json#/calibration_dates_def" }
        },
        "additionalProperties": false
    },
    "equipmentType_wo_required_fields": {
        "type": "object",
        "properties": {
            "type":              {"type": ["string","null"]},
            "description":       {"type": ["string","null"]},
            "manufacturer":      {"type": ["string","null"]},
            "vendor":            {"type": ["string","null"]},
            "model":             {"type": ["string","null"]},
            "serial_number":     {"type": ["string","null"]},
            "installation_date": {"$ref": "definitions.schema.json#/any_date" },
            "removal_date":      {"$ref": "definitions.schema.json#/any_date" },
            "calibration_dates": {"$ref": "definitions.schema.json#/calibration_dates_def" }
        },
        "additionalProperties": false
    },
    "equipmentType_noRequired": {
        "type": "object",
        "properties": {
            "type":              {"type": ["string","null"] },
            "description":       {"type": ["string","null"] },
            "manufacturer":      {"type": ["string","null"] },
            "vendor":            {"type": ["string","null"] },
            "model":             {"type": ["string","null"]},
            "serial_number":     {"type": ["string","null"] },
            "installation_date": {"$ref": "definitions.schema.json#/any_date" },
            "removal_date":      {"$ref": "definitions.schema.json#/any_date" },
            "calibration_dates": {"$ref": "definitions.schema.json#/calibration_dates_def"}
        },
        "additionalProperties": false
    },
    "calibration_dates_def": { 
        "type": "array",
        "description": "list of calibration dates",
        "minItems": 1,
        "items": {"$ref": "definitions.schema.json#/any_date"}
    },
    "polarity_codes" : {
            "type": "string",
            "pattern": "^[+-]$"
    }    
}
